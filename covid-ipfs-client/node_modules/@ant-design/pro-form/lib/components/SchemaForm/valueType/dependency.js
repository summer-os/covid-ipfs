"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dependency = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireDefault(require("react"));

var _warning = require("rc-util/lib/warning");

var _Dependency = _interopRequireDefault(require("../../Dependency"));

var dependency = function dependency(item, _ref) {
  var genItems = _ref.genItems;

  /** ProFormDependency */
  if (item.valueType === 'dependency') {
    var _item$getFieldProps;

    var fieldProps = (_item$getFieldProps = item.getFieldProps) === null || _item$getFieldProps === void 0 ? void 0 : _item$getFieldProps.call(item);
    (0, _warning.noteOnce)(Array.isArray(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.name), 'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"');
    (0, _warning.noteOnce)(typeof item.columns === 'function', 'SchemaForm: columns should be a function when valueType is "dependency"');
    if (!Array.isArray(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.name)) return null;
    return /*#__PURE__*/_react.default.createElement(_Dependency.default, (0, _extends2.default)({}, fieldProps, {
      key: item.key
    }), function (values) {
      if (!item.columns || typeof item.columns !== 'function') return null;
      return genItems(item.columns(values));
    });
  }

  return true;
};

exports.dependency = dependency;