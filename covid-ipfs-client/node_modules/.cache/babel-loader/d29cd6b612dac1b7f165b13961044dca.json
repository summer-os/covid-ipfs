{"ast":null,"code":"import \"antd/es/upload/style\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"fieldProps\", \"name\", \"action\", \"accept\", \"listType\", \"title\", \"max\", \"icon\", \"buttonProps\", \"onChange\", \"disabled\", \"proFieldProps\"];\nimport { UploadOutlined } from '@ant-design/icons';\nimport React, { useMemo } from 'react';\nimport { createField } from '../../BaseForm/createField';\n/**\n * 上传按钮组件\n *\n * @param\n */\n\nvar BaseProFormUploadButton = function BaseProFormUploadButton(_ref, ref) {\n  var fieldProps = _ref.fieldProps,\n      name = _ref.name,\n      action = _ref.action,\n      accept = _ref.accept,\n      listType = _ref.listType,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? '单击上传' : _ref$title,\n      max = _ref.max,\n      _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? /*#__PURE__*/React.createElement(UploadOutlined, null) : _ref$icon,\n      buttonProps = _ref.buttonProps,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      proFieldProps = _ref.proFieldProps,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var value = useMemo(function () {\n    var _restProps$fileList;\n\n    return (_restProps$fileList = restProps.fileList) !== null && _restProps$fileList !== void 0 ? _restProps$fileList : restProps.value;\n  }, [restProps.fileList, restProps.value]); // 如果配置了 max ，并且 超过了文件列表的大小，就不展示按钮\n\n  var showUploadButton = (max === undefined || !value || (value === null || value === void 0 ? void 0 : value.length) < max) && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.mode) !== 'read';\n  var isPictureCard = (listType !== null && listType !== void 0 ? listType : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.listType) === 'picture-card';\n  return /*#__PURE__*/React.createElement(_Upload, _extends({\n    action: action,\n    accept: accept,\n    ref: ref // 'fileList' 改成和 ant.design 文档中 Update 组件 默认 file字段一样\n    ,\n    name: name || 'file',\n    listType: listType || 'picture',\n    fileList: value\n  }, fieldProps, {\n    onChange: function onChange(info) {\n      var _fieldProps$onChange;\n\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(info);\n      fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, info);\n    }\n  }), showUploadButton && (isPictureCard ? /*#__PURE__*/React.createElement(\"span\", null, icon, \" \", title) : /*#__PURE__*/React.createElement(_Button, _extends({\n    disabled: disabled || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.disabled)\n  }, buttonProps), icon, title)));\n};\n\nvar ProFormUploadButton = createField( /*#__PURE__*/React.forwardRef(BaseProFormUploadButton), {\n  getValueFromEvent: function getValueFromEvent(value) {\n    return value.fileList;\n  }\n});\nexport default ProFormUploadButton;","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-form/es/components/UploadButton/index.js"],"names":["_Upload","_Button","_extends","_objectWithoutProperties","_excluded","UploadOutlined","React","useMemo","createField","BaseProFormUploadButton","_ref","ref","fieldProps","name","action","accept","listType","_ref$title","title","max","_ref$icon","icon","createElement","buttonProps","_onChange","onChange","disabled","proFieldProps","restProps","value","_restProps$fileList","fileList","showUploadButton","undefined","length","mode","isPictureCard","info","_fieldProps$onChange","call","ProFormUploadButton","forwardRef","getValueFromEvent"],"mappings":"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","sourcesContent":["import \"antd/es/upload/style\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"fieldProps\", \"name\", \"action\", \"accept\", \"listType\", \"title\", \"max\", \"icon\", \"buttonProps\", \"onChange\", \"disabled\", \"proFieldProps\"];\nimport { UploadOutlined } from '@ant-design/icons';\nimport React, { useMemo } from 'react';\nimport { createField } from '../../BaseForm/createField';\n/**\n * 上传按钮组件\n *\n * @param\n */\n\nvar BaseProFormUploadButton = function BaseProFormUploadButton(_ref, ref) {\n  var fieldProps = _ref.fieldProps,\n      name = _ref.name,\n      action = _ref.action,\n      accept = _ref.accept,\n      listType = _ref.listType,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? '单击上传' : _ref$title,\n      max = _ref.max,\n      _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? /*#__PURE__*/React.createElement(UploadOutlined, null) : _ref$icon,\n      buttonProps = _ref.buttonProps,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      proFieldProps = _ref.proFieldProps,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var value = useMemo(function () {\n    var _restProps$fileList;\n\n    return (_restProps$fileList = restProps.fileList) !== null && _restProps$fileList !== void 0 ? _restProps$fileList : restProps.value;\n  }, [restProps.fileList, restProps.value]); // 如果配置了 max ，并且 超过了文件列表的大小，就不展示按钮\n\n  var showUploadButton = (max === undefined || !value || (value === null || value === void 0 ? void 0 : value.length) < max) && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.mode) !== 'read';\n  var isPictureCard = (listType !== null && listType !== void 0 ? listType : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.listType) === 'picture-card';\n  return /*#__PURE__*/React.createElement(_Upload, _extends({\n    action: action,\n    accept: accept,\n    ref: ref // 'fileList' 改成和 ant.design 文档中 Update 组件 默认 file字段一样\n    ,\n    name: name || 'file',\n    listType: listType || 'picture',\n    fileList: value\n  }, fieldProps, {\n    onChange: function onChange(info) {\n      var _fieldProps$onChange;\n\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(info);\n      fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, info);\n    }\n  }), showUploadButton && (isPictureCard ? /*#__PURE__*/React.createElement(\"span\", null, icon, \" \", title) : /*#__PURE__*/React.createElement(_Button, _extends({\n    disabled: disabled || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.disabled)\n  }, buttonProps), icon, title)));\n};\n\nvar ProFormUploadButton = createField( /*#__PURE__*/React.forwardRef(BaseProFormUploadButton), {\n  getValueFromEvent: function getValueFromEvent(value) {\n    return value.fileList;\n  }\n});\nexport default ProFormUploadButton;"]},"metadata":{},"sourceType":"module"}