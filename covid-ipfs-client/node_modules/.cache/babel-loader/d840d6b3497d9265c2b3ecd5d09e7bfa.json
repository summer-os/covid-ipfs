{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"valueType\", \"customLightMode\", \"lightFilterLabelFormatter\", \"valuePropName\", \"ignoreWidth\", \"defaultProps\"],\n    _excluded2 = [\"label\", \"tooltip\", \"placeholder\", \"width\", \"bordered\", \"messageVariables\", \"ignoreFormItem\", \"transform\", \"convertValue\", \"readonly\", \"allowClear\", \"colSize\", \"getFormItemProps\", \"getFieldProps\", \"filedConfig\", \"cacheForSwr\", \"proFieldProps\"];\nimport { isDeepEqualReact, omitUndefined, pickProFormItemProps, usePrevious } from '@ant-design/pro-utils';\nimport classnames from 'classnames';\nimport { FieldContext as RcFieldContext } from 'rc-field-form';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useMemo, useState } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport { ProFormDependency, ProFormItem } from '../components';\nimport FieldContext from '../FieldContext';\nimport { useGridHelpers } from '../helpers';\nexport var TYPE = Symbol('ProFormComponent');\nvar WIDTH_SIZE_ENUM = {\n  // 适用于短数字，短文本或者选项\n  xs: 104,\n  s: 216,\n  // 适用于较短字段录入、如姓名、电话、ID 等。\n  sm: 216,\n  m: 328,\n  // 标准宽度，适用于大部分字段长度。\n  md: 328,\n  l: 440,\n  // 适用于较长字段录入，如长网址、标签组、文件路径等。\n  lg: 440,\n  // 适用于长文本录入，如长链接、描述、备注等，通常搭配自适应多行输入框或定高文本域使用。\n  xl: 552\n};\nvar ignoreWidthValueType = ['switch', 'radioButton', 'radio', 'rate'];\n/**\n * 这个方法的主要作用的帮助 Field 增加 FormItem 同时也会处理 lightFilter\n *\n * @param Field\n * @param config\n */\n\nfunction createField(Field, config) {\n  // 标记是否是 ProForm 的组件\n  // @ts-ignore\n  // eslint-disable-next-line no-param-reassign\n  Field.displayName = 'ProFormComponent';\n\n  var FieldWithContext = function FieldWithContext(props) {\n    var _ref = _objectSpread(_objectSpread({}, props === null || props === void 0 ? void 0 : props.filedConfig), config) || {},\n        tmpValueType = _ref.valueType,\n        customLightMode = _ref.customLightMode,\n        lightFilterLabelFormatter = _ref.lightFilterLabelFormatter,\n        _ref$valuePropName = _ref.valuePropName,\n        valuePropName = _ref$valuePropName === void 0 ? 'value' : _ref$valuePropName,\n        ignoreWidth = _ref.ignoreWidth,\n        defaultProps = _ref.defaultProps,\n        defaultFormItemProps = _objectWithoutProperties(_ref, _excluded);\n\n    var _defaultProps$props = _objectSpread(_objectSpread({}, defaultProps), props),\n        label = _defaultProps$props.label,\n        tooltip = _defaultProps$props.tooltip,\n        placeholder = _defaultProps$props.placeholder,\n        width = _defaultProps$props.width,\n        bordered = _defaultProps$props.bordered,\n        messageVariables = _defaultProps$props.messageVariables,\n        ignoreFormItem = _defaultProps$props.ignoreFormItem,\n        transform = _defaultProps$props.transform,\n        convertValue = _defaultProps$props.convertValue,\n        readonly = _defaultProps$props.readonly,\n        allowClear = _defaultProps$props.allowClear,\n        colSize = _defaultProps$props.colSize,\n        getFormItemProps = _defaultProps$props.getFormItemProps,\n        getFieldProps = _defaultProps$props.getFieldProps,\n        filedConfig = _defaultProps$props.filedConfig,\n        cacheForSwr = _defaultProps$props.cacheForSwr,\n        proFieldProps = _defaultProps$props.proFieldProps,\n        rest = _objectWithoutProperties(_defaultProps$props, _excluded2);\n\n    var valueType = tmpValueType || rest.valueType; // 有些 valueType 不需要宽度\n\n    var isIgnoreWidth = useMemo(function () {\n      return ignoreWidth || ignoreWidthValueType.includes(valueType);\n    }, [ignoreWidth, valueType]);\n\n    var _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        forceUpdate = _useState2[1]; // onChange触发fieldProps,formItemProps重新执行\n\n\n    var _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        onlyChange = _useState4[0],\n        forceUpdateByOnChange = _useState4[1];\n    /**\n     * 从 context 中拿到的值\n     */\n\n\n    var contextValue = React.useContext(FieldContext);\n    /**\n     * dependenciesValues change to trigger re-execute of getFieldProps and getFormItemProps\n     */\n\n    var changedProps = useMemo(function () {\n      return {\n        formItemProps: getFormItemProps === null || getFormItemProps === void 0 ? void 0 : getFormItemProps(),\n        fieldProps: getFieldProps === null || getFieldProps === void 0 ? void 0 : getFieldProps()\n      };\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [getFieldProps, getFormItemProps, rest.dependenciesValues, onlyChange]);\n    var fieldProps = useMemo(function () {\n      var newFieldProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, ignoreFormItem ? omitUndefined({\n        value: rest.value\n      }) : {}), {}, {\n        placeholder: placeholder,\n        disabled: props.disabled\n      }, contextValue.fieldProps), changedProps.fieldProps), rest.fieldProps);\n\n      newFieldProps.style = omitUndefined(newFieldProps === null || newFieldProps === void 0 ? void 0 : newFieldProps.style);\n      return newFieldProps;\n    }, [ignoreFormItem, rest.value, rest.fieldProps, placeholder, props.disabled, contextValue.fieldProps, changedProps.fieldProps]); // restFormItemProps is user props pass to Form.Item\n\n    var restFormItemProps = pickProFormItemProps(rest);\n    var formItemProps = useMemo(function () {\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, contextValue.formItemProps), restFormItemProps), changedProps.formItemProps), rest.formItemProps);\n    }, [changedProps.formItemProps, contextValue.formItemProps, rest.formItemProps, restFormItemProps]);\n    var otherProps = useMemo(function () {\n      return _objectSpread(_objectSpread({\n        messageVariables: messageVariables\n      }, defaultFormItemProps), formItemProps);\n    }, [defaultFormItemProps, formItemProps, messageVariables]);\n    noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n    !rest['defaultValue'], '请不要在 Form 中使用 defaultXXX。如果需要默认值请使用 initialValues 和 initialValue。');\n\n    var _useContext = useContext(RcFieldContext),\n        prefixName = _useContext.prefixName;\n\n    var proFieldKey = useMemo(function () {\n      var name = otherProps === null || otherProps === void 0 ? void 0 : otherProps.name;\n      if (Array.isArray(name)) name = name.join('_');\n      if (Array.isArray(prefixName) && name) name = \"\".concat(prefixName.join('.'), \".\").concat(name);\n      return name && \"form-field-\".concat(name); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stringify(otherProps === null || otherProps === void 0 ? void 0 : otherProps.name), prefixName]);\n    var prefRest = usePrevious(rest);\n    var onChange = useCallback(function () {\n      var _fieldProps$onChange;\n\n      if (getFormItemProps || getFieldProps) {\n        forceUpdateByOnChange([]);\n      } else if (rest.renderFormItem) {\n        forceUpdate([]);\n      }\n\n      for (var _len = arguments.length, restParams = new Array(_len), _key = 0; _key < _len; _key++) {\n        restParams[_key] = arguments[_key];\n      }\n\n      fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call.apply(_fieldProps$onChange, [fieldProps].concat(restParams));\n    }, [getFieldProps, getFormItemProps, fieldProps, rest.renderFormItem]);\n    var style = useMemo(function () {\n      var newStyle = _objectSpread({\n        width: width && !WIDTH_SIZE_ENUM[width] ? width : contextValue.grid ? '100%' : undefined\n      }, fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.style);\n\n      if (isIgnoreWidth) Reflect.deleteProperty(newStyle, 'width');\n      return omitUndefined(newStyle); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stringify(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.style), contextValue.grid, isIgnoreWidth, width]);\n    var className = useMemo(function () {\n      var isSizeEnum = width && WIDTH_SIZE_ENUM[width];\n      return classnames(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.className, _defineProperty({\n        'pro-field': isSizeEnum\n      }, \"pro-field-\".concat(width), isSizeEnum && !isIgnoreWidth)) || undefined;\n    }, [width, fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.className, isIgnoreWidth]);\n    var fieldProFieldProps = useMemo(function () {\n      return omitUndefined(_objectSpread({\n        mode: rest === null || rest === void 0 ? void 0 : rest.mode,\n        readonly: readonly,\n        params: rest.params,\n        proFieldKey: proFieldKey,\n        cacheForSwr: cacheForSwr\n      }, proFieldProps));\n    }, [rest === null || rest === void 0 ? void 0 : rest.mode, rest.params, readonly, proFieldKey, cacheForSwr, proFieldProps]);\n    var fieldFieldProps = useMemo(function () {\n      return _objectSpread(_objectSpread({\n        onChange: onChange,\n        allowClear: allowClear\n      }, fieldProps), {}, {\n        style: style,\n        className: className\n      });\n    }, [allowClear, className, onChange, fieldProps, style]);\n    var field = useMemo(function () {\n      return /*#__PURE__*/React.createElement(Field // @ts-ignore\n      , _extends({\n        key: props.proFormFieldKey || props.name // ProXxx 上面的 props 透传给 FieldProps，可能包含 Field 自定义的 props，\n        // 比如 ProFormSelect 的 request\n\n      }, rest, {\n        fieldProps: fieldFieldProps,\n        proFieldProps: fieldProFieldProps\n      })); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [fieldProFieldProps, fieldFieldProps, // eslint-disable-next-line react-hooks/exhaustive-deps\n    isDeepEqualReact(prefRest, rest, ['onChange', 'onBlur', 'onFocus', 'record']) ? undefined : {}]); // 使用useMemo包裹避免不必要的re-render\n\n    var FormItem = useMemo(function () {\n      var _otherProps$name, _field$props$allowCle, _field$props, _field$props2;\n\n      return /*#__PURE__*/React.createElement(ProFormItem // 全局的提供一个 tip 功能，可以减少代码量\n      // 轻量模式下不通过 FormItem 显示 label\n      , _extends({\n        label: label && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light) !== true ? label : undefined,\n        tooltip: (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light) !== true && tooltip,\n        valuePropName: valuePropName // @ts-ignore\n        ,\n        key: props.proFormFieldKey || ((_otherProps$name = otherProps.name) === null || _otherProps$name === void 0 ? void 0 : _otherProps$name.toString()) // @ts-ignore\n\n      }, otherProps, {\n        ignoreFormItem: ignoreFormItem,\n        transform: transform,\n        dataFormat: fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format,\n        valueType: valueType,\n        messageVariables: _objectSpread({\n          label: label || ''\n        }, otherProps === null || otherProps === void 0 ? void 0 : otherProps.messageVariables),\n        convertValue: convertValue,\n        lightProps: omitUndefined(_objectSpread(_objectSpread(_objectSpread({}, fieldProps), {}, {\n          valueType: valueType,\n          bordered: bordered,\n          allowClear: (_field$props$allowCle = field === null || field === void 0 ? void 0 : (_field$props = field.props) === null || _field$props === void 0 ? void 0 : _field$props.allowClear) !== null && _field$props$allowCle !== void 0 ? _field$props$allowCle : allowClear,\n          light: proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light,\n          label: label,\n          customLightMode: customLightMode,\n          labelFormatter: lightFilterLabelFormatter,\n          valuePropName: valuePropName,\n          footerRender: field === null || field === void 0 ? void 0 : (_field$props2 = field.props) === null || _field$props2 === void 0 ? void 0 : _field$props2.footerRender\n        }, rest.lightProps), otherProps.lightProps))\n      }), field);\n    }, [label, proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light, tooltip, valuePropName, props.proFormFieldKey, otherProps, ignoreFormItem, transform, fieldProps, valueType, convertValue, bordered, field, allowClear, customLightMode, lightFilterLabelFormatter, rest.lightProps]);\n\n    var _useGridHelpers = useGridHelpers(rest),\n        ColWrapper = _useGridHelpers.ColWrapper;\n\n    return /*#__PURE__*/React.createElement(ColWrapper, null, FormItem);\n  };\n\n  var DependencyWrapper = function DependencyWrapper(props) {\n    var dependencies = props.dependencies;\n    return dependencies ? /*#__PURE__*/React.createElement(ProFormDependency, {\n      name: dependencies\n    }, function (values) {\n      return /*#__PURE__*/React.createElement(FieldWithContext, _extends({\n        dependenciesValues: values,\n        dependencies: dependencies\n      }, props));\n    }) : /*#__PURE__*/React.createElement(FieldWithContext, _extends({\n      dependencies: dependencies\n    }, props));\n  };\n\n  return DependencyWrapper;\n}\n\nexport { createField };","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-form/es/BaseForm/createField.js"],"names":["_extends","_defineProperty","_slicedToArray","_objectSpread","_objectWithoutProperties","_excluded","_excluded2","isDeepEqualReact","omitUndefined","pickProFormItemProps","usePrevious","classnames","FieldContext","RcFieldContext","noteOnce","React","useCallback","useContext","useMemo","useState","stringify","ProFormDependency","ProFormItem","useGridHelpers","TYPE","Symbol","WIDTH_SIZE_ENUM","xs","s","sm","m","md","l","lg","xl","ignoreWidthValueType","createField","Field","config","displayName","FieldWithContext","props","_ref","filedConfig","tmpValueType","valueType","customLightMode","lightFilterLabelFormatter","_ref$valuePropName","valuePropName","ignoreWidth","defaultProps","defaultFormItemProps","_defaultProps$props","label","tooltip","placeholder","width","bordered","messageVariables","ignoreFormItem","transform","convertValue","readonly","allowClear","colSize","getFormItemProps","getFieldProps","cacheForSwr","proFieldProps","rest","isIgnoreWidth","includes","_useState","_useState2","forceUpdate","_useState3","_useState4","onlyChange","forceUpdateByOnChange","contextValue","changedProps","formItemProps","fieldProps","dependenciesValues","newFieldProps","value","disabled","style","restFormItemProps","otherProps","_useContext","prefixName","proFieldKey","name","Array","isArray","join","concat","prefRest","onChange","_fieldProps$onChange","renderFormItem","_len","arguments","length","restParams","_key","call","apply","newStyle","grid","undefined","Reflect","deleteProperty","className","isSizeEnum","fieldProFieldProps","mode","params","fieldFieldProps","field","createElement","key","proFormFieldKey","FormItem","_otherProps$name","_field$props$allowCle","_field$props","_field$props2","light","toString","dataFormat","format","lightProps","labelFormatter","footerRender","_useGridHelpers","ColWrapper","DependencyWrapper","dependencies","values"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"valueType\", \"customLightMode\", \"lightFilterLabelFormatter\", \"valuePropName\", \"ignoreWidth\", \"defaultProps\"],\n    _excluded2 = [\"label\", \"tooltip\", \"placeholder\", \"width\", \"bordered\", \"messageVariables\", \"ignoreFormItem\", \"transform\", \"convertValue\", \"readonly\", \"allowClear\", \"colSize\", \"getFormItemProps\", \"getFieldProps\", \"filedConfig\", \"cacheForSwr\", \"proFieldProps\"];\nimport { isDeepEqualReact, omitUndefined, pickProFormItemProps, usePrevious } from '@ant-design/pro-utils';\nimport classnames from 'classnames';\nimport { FieldContext as RcFieldContext } from 'rc-field-form';\nimport { noteOnce } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useMemo, useState } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport { ProFormDependency, ProFormItem } from '../components';\nimport FieldContext from '../FieldContext';\nimport { useGridHelpers } from '../helpers';\nexport var TYPE = Symbol('ProFormComponent');\nvar WIDTH_SIZE_ENUM = {\n  // 适用于短数字，短文本或者选项\n  xs: 104,\n  s: 216,\n  // 适用于较短字段录入、如姓名、电话、ID 等。\n  sm: 216,\n  m: 328,\n  // 标准宽度，适用于大部分字段长度。\n  md: 328,\n  l: 440,\n  // 适用于较长字段录入，如长网址、标签组、文件路径等。\n  lg: 440,\n  // 适用于长文本录入，如长链接、描述、备注等，通常搭配自适应多行输入框或定高文本域使用。\n  xl: 552\n};\nvar ignoreWidthValueType = ['switch', 'radioButton', 'radio', 'rate'];\n/**\n * 这个方法的主要作用的帮助 Field 增加 FormItem 同时也会处理 lightFilter\n *\n * @param Field\n * @param config\n */\n\nfunction createField(Field, config) {\n  // 标记是否是 ProForm 的组件\n  // @ts-ignore\n  // eslint-disable-next-line no-param-reassign\n  Field.displayName = 'ProFormComponent';\n\n  var FieldWithContext = function FieldWithContext(props) {\n    var _ref = _objectSpread(_objectSpread({}, props === null || props === void 0 ? void 0 : props.filedConfig), config) || {},\n        tmpValueType = _ref.valueType,\n        customLightMode = _ref.customLightMode,\n        lightFilterLabelFormatter = _ref.lightFilterLabelFormatter,\n        _ref$valuePropName = _ref.valuePropName,\n        valuePropName = _ref$valuePropName === void 0 ? 'value' : _ref$valuePropName,\n        ignoreWidth = _ref.ignoreWidth,\n        defaultProps = _ref.defaultProps,\n        defaultFormItemProps = _objectWithoutProperties(_ref, _excluded);\n\n    var _defaultProps$props = _objectSpread(_objectSpread({}, defaultProps), props),\n        label = _defaultProps$props.label,\n        tooltip = _defaultProps$props.tooltip,\n        placeholder = _defaultProps$props.placeholder,\n        width = _defaultProps$props.width,\n        bordered = _defaultProps$props.bordered,\n        messageVariables = _defaultProps$props.messageVariables,\n        ignoreFormItem = _defaultProps$props.ignoreFormItem,\n        transform = _defaultProps$props.transform,\n        convertValue = _defaultProps$props.convertValue,\n        readonly = _defaultProps$props.readonly,\n        allowClear = _defaultProps$props.allowClear,\n        colSize = _defaultProps$props.colSize,\n        getFormItemProps = _defaultProps$props.getFormItemProps,\n        getFieldProps = _defaultProps$props.getFieldProps,\n        filedConfig = _defaultProps$props.filedConfig,\n        cacheForSwr = _defaultProps$props.cacheForSwr,\n        proFieldProps = _defaultProps$props.proFieldProps,\n        rest = _objectWithoutProperties(_defaultProps$props, _excluded2);\n\n    var valueType = tmpValueType || rest.valueType; // 有些 valueType 不需要宽度\n\n    var isIgnoreWidth = useMemo(function () {\n      return ignoreWidth || ignoreWidthValueType.includes(valueType);\n    }, [ignoreWidth, valueType]);\n\n    var _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        forceUpdate = _useState2[1]; // onChange触发fieldProps,formItemProps重新执行\n\n\n    var _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        onlyChange = _useState4[0],\n        forceUpdateByOnChange = _useState4[1];\n    /**\n     * 从 context 中拿到的值\n     */\n\n\n    var contextValue = React.useContext(FieldContext);\n    /**\n     * dependenciesValues change to trigger re-execute of getFieldProps and getFormItemProps\n     */\n\n    var changedProps = useMemo(function () {\n      return {\n        formItemProps: getFormItemProps === null || getFormItemProps === void 0 ? void 0 : getFormItemProps(),\n        fieldProps: getFieldProps === null || getFieldProps === void 0 ? void 0 : getFieldProps()\n      };\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [getFieldProps, getFormItemProps, rest.dependenciesValues, onlyChange]);\n    var fieldProps = useMemo(function () {\n      var newFieldProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, ignoreFormItem ? omitUndefined({\n        value: rest.value\n      }) : {}), {}, {\n        placeholder: placeholder,\n        disabled: props.disabled\n      }, contextValue.fieldProps), changedProps.fieldProps), rest.fieldProps);\n\n      newFieldProps.style = omitUndefined(newFieldProps === null || newFieldProps === void 0 ? void 0 : newFieldProps.style);\n      return newFieldProps;\n    }, [ignoreFormItem, rest.value, rest.fieldProps, placeholder, props.disabled, contextValue.fieldProps, changedProps.fieldProps]); // restFormItemProps is user props pass to Form.Item\n\n    var restFormItemProps = pickProFormItemProps(rest);\n    var formItemProps = useMemo(function () {\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, contextValue.formItemProps), restFormItemProps), changedProps.formItemProps), rest.formItemProps);\n    }, [changedProps.formItemProps, contextValue.formItemProps, rest.formItemProps, restFormItemProps]);\n    var otherProps = useMemo(function () {\n      return _objectSpread(_objectSpread({\n        messageVariables: messageVariables\n      }, defaultFormItemProps), formItemProps);\n    }, [defaultFormItemProps, formItemProps, messageVariables]);\n    noteOnce( // eslint-disable-next-line @typescript-eslint/dot-notation\n    !rest['defaultValue'], '请不要在 Form 中使用 defaultXXX。如果需要默认值请使用 initialValues 和 initialValue。');\n\n    var _useContext = useContext(RcFieldContext),\n        prefixName = _useContext.prefixName;\n\n    var proFieldKey = useMemo(function () {\n      var name = otherProps === null || otherProps === void 0 ? void 0 : otherProps.name;\n      if (Array.isArray(name)) name = name.join('_');\n      if (Array.isArray(prefixName) && name) name = \"\".concat(prefixName.join('.'), \".\").concat(name);\n      return name && \"form-field-\".concat(name); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stringify(otherProps === null || otherProps === void 0 ? void 0 : otherProps.name), prefixName]);\n    var prefRest = usePrevious(rest);\n    var onChange = useCallback(function () {\n      var _fieldProps$onChange;\n\n      if (getFormItemProps || getFieldProps) {\n        forceUpdateByOnChange([]);\n      } else if (rest.renderFormItem) {\n        forceUpdate([]);\n      }\n\n      for (var _len = arguments.length, restParams = new Array(_len), _key = 0; _key < _len; _key++) {\n        restParams[_key] = arguments[_key];\n      }\n\n      fieldProps === null || fieldProps === void 0 ? void 0 : (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call.apply(_fieldProps$onChange, [fieldProps].concat(restParams));\n    }, [getFieldProps, getFormItemProps, fieldProps, rest.renderFormItem]);\n    var style = useMemo(function () {\n      var newStyle = _objectSpread({\n        width: width && !WIDTH_SIZE_ENUM[width] ? width : contextValue.grid ? '100%' : undefined\n      }, fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.style);\n\n      if (isIgnoreWidth) Reflect.deleteProperty(newStyle, 'width');\n      return omitUndefined(newStyle); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stringify(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.style), contextValue.grid, isIgnoreWidth, width]);\n    var className = useMemo(function () {\n      var isSizeEnum = width && WIDTH_SIZE_ENUM[width];\n      return classnames(fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.className, _defineProperty({\n        'pro-field': isSizeEnum\n      }, \"pro-field-\".concat(width), isSizeEnum && !isIgnoreWidth)) || undefined;\n    }, [width, fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.className, isIgnoreWidth]);\n    var fieldProFieldProps = useMemo(function () {\n      return omitUndefined(_objectSpread({\n        mode: rest === null || rest === void 0 ? void 0 : rest.mode,\n        readonly: readonly,\n        params: rest.params,\n        proFieldKey: proFieldKey,\n        cacheForSwr: cacheForSwr\n      }, proFieldProps));\n    }, [rest === null || rest === void 0 ? void 0 : rest.mode, rest.params, readonly, proFieldKey, cacheForSwr, proFieldProps]);\n    var fieldFieldProps = useMemo(function () {\n      return _objectSpread(_objectSpread({\n        onChange: onChange,\n        allowClear: allowClear\n      }, fieldProps), {}, {\n        style: style,\n        className: className\n      });\n    }, [allowClear, className, onChange, fieldProps, style]);\n    var field = useMemo(function () {\n      return /*#__PURE__*/React.createElement(Field // @ts-ignore\n      , _extends({\n        key: props.proFormFieldKey || props.name // ProXxx 上面的 props 透传给 FieldProps，可能包含 Field 自定义的 props，\n        // 比如 ProFormSelect 的 request\n\n      }, rest, {\n        fieldProps: fieldFieldProps,\n        proFieldProps: fieldProFieldProps\n      })); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [fieldProFieldProps, fieldFieldProps, // eslint-disable-next-line react-hooks/exhaustive-deps\n    isDeepEqualReact(prefRest, rest, ['onChange', 'onBlur', 'onFocus', 'record']) ? undefined : {}]); // 使用useMemo包裹避免不必要的re-render\n\n    var FormItem = useMemo(function () {\n      var _otherProps$name, _field$props$allowCle, _field$props, _field$props2;\n\n      return /*#__PURE__*/React.createElement(ProFormItem // 全局的提供一个 tip 功能，可以减少代码量\n      // 轻量模式下不通过 FormItem 显示 label\n      , _extends({\n        label: label && (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light) !== true ? label : undefined,\n        tooltip: (proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light) !== true && tooltip,\n        valuePropName: valuePropName // @ts-ignore\n        ,\n        key: props.proFormFieldKey || ((_otherProps$name = otherProps.name) === null || _otherProps$name === void 0 ? void 0 : _otherProps$name.toString()) // @ts-ignore\n\n      }, otherProps, {\n        ignoreFormItem: ignoreFormItem,\n        transform: transform,\n        dataFormat: fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format,\n        valueType: valueType,\n        messageVariables: _objectSpread({\n          label: label || ''\n        }, otherProps === null || otherProps === void 0 ? void 0 : otherProps.messageVariables),\n        convertValue: convertValue,\n        lightProps: omitUndefined(_objectSpread(_objectSpread(_objectSpread({}, fieldProps), {}, {\n          valueType: valueType,\n          bordered: bordered,\n          allowClear: (_field$props$allowCle = field === null || field === void 0 ? void 0 : (_field$props = field.props) === null || _field$props === void 0 ? void 0 : _field$props.allowClear) !== null && _field$props$allowCle !== void 0 ? _field$props$allowCle : allowClear,\n          light: proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light,\n          label: label,\n          customLightMode: customLightMode,\n          labelFormatter: lightFilterLabelFormatter,\n          valuePropName: valuePropName,\n          footerRender: field === null || field === void 0 ? void 0 : (_field$props2 = field.props) === null || _field$props2 === void 0 ? void 0 : _field$props2.footerRender\n        }, rest.lightProps), otherProps.lightProps))\n      }), field);\n    }, [label, proFieldProps === null || proFieldProps === void 0 ? void 0 : proFieldProps.light, tooltip, valuePropName, props.proFormFieldKey, otherProps, ignoreFormItem, transform, fieldProps, valueType, convertValue, bordered, field, allowClear, customLightMode, lightFilterLabelFormatter, rest.lightProps]);\n\n    var _useGridHelpers = useGridHelpers(rest),\n        ColWrapper = _useGridHelpers.ColWrapper;\n\n    return /*#__PURE__*/React.createElement(ColWrapper, null, FormItem);\n  };\n\n  var DependencyWrapper = function DependencyWrapper(props) {\n    var dependencies = props.dependencies;\n    return dependencies ? /*#__PURE__*/React.createElement(ProFormDependency, {\n      name: dependencies\n    }, function (values) {\n      return /*#__PURE__*/React.createElement(FieldWithContext, _extends({\n        dependenciesValues: values,\n        dependencies: dependencies\n      }, props));\n    }) : /*#__PURE__*/React.createElement(FieldWithContext, _extends({\n      dependencies: dependencies\n    }, props));\n  };\n\n  return DependencyWrapper;\n}\n\nexport { createField };"]},"metadata":{},"sourceType":"module"}