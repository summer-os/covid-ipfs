{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport React from \"react\";\nimport { noteOnce } from \"rc-util/es/warning\";\nimport { useContext, useEffect, useImperativeHandle, useRef } from 'react';\nimport { BaseForm } from '../../BaseForm';\nimport { StepsFormProvide } from './index';\n\nfunction StepForm(props) {\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide);\n\n  var onFinish = props.onFinish,\n      step = props.step,\n      propFormRef = props.formRef,\n      title = props.title,\n      stepProps = props.stepProps,\n      restProps = _objectWithoutProperties(props, _excluded); // eslint-disable-next-line @typescript-eslint/dot-notation\n\n\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n  /** Dom 不存在的时候解除挂载 */\n\n  useEffect(function () {\n    if (!(props.name || props.step)) return;\n    var name = (props.name || props.step).toString();\n    context === null || context === void 0 ? void 0 : context.regForm(name, props);\n    return function () {\n      context === null || context === void 0 ? void 0 : context.unRegForm(name);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (context && (context === null || context === void 0 ? void 0 : context.formArrayRef)) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n\n  return /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (restProps.name) {\n                  context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n                }\n\n                if (!onFinish) {\n                  _context.next = 9;\n                  break;\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(true); // 如果报错，直接抛出\n\n                _context.next = 5;\n                return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n\n              case 5:\n                success = _context.sent;\n\n                if (success) {\n                  context === null || context === void 0 ? void 0 : context.next();\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 9:\n                if (!(context === null || context === void 0 ? void 0 : context.lastStep)) context === null || context === void 0 ? void 0 : context.next();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\n\nexport default StepForm;","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-form/es/layouts/StepsForm/StepForm.js"],"names":["_extends","_regeneratorRuntime","_asyncToGenerator","_objectWithoutProperties","_excluded","React","noteOnce","useContext","useEffect","useImperativeHandle","useRef","BaseForm","StepsFormProvide","StepForm","props","formRef","context","onFinish","step","propFormRef","title","stepProps","restProps","current","name","toString","regForm","unRegForm","formArrayRef","createElement","_ref","mark","_callee","values","success","wrap","_callee$","_context","prev","next","onFormFinish","setLoading","sent","abrupt","lastStep","stop","_x","apply","arguments","layout"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport React from \"react\";\nimport { noteOnce } from \"rc-util/es/warning\";\nimport { useContext, useEffect, useImperativeHandle, useRef } from 'react';\nimport { BaseForm } from '../../BaseForm';\nimport { StepsFormProvide } from './index';\n\nfunction StepForm(props) {\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide);\n\n  var onFinish = props.onFinish,\n      step = props.step,\n      propFormRef = props.formRef,\n      title = props.title,\n      stepProps = props.stepProps,\n      restProps = _objectWithoutProperties(props, _excluded); // eslint-disable-next-line @typescript-eslint/dot-notation\n\n\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n  /** Dom 不存在的时候解除挂载 */\n\n  useEffect(function () {\n    if (!(props.name || props.step)) return;\n    var name = (props.name || props.step).toString();\n    context === null || context === void 0 ? void 0 : context.regForm(name, props);\n    return function () {\n      context === null || context === void 0 ? void 0 : context.unRegForm(name);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (context && (context === null || context === void 0 ? void 0 : context.formArrayRef)) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n\n  return /*#__PURE__*/React.createElement(BaseForm, _extends({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (restProps.name) {\n                  context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n                }\n\n                if (!onFinish) {\n                  _context.next = 9;\n                  break;\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(true); // 如果报错，直接抛出\n\n                _context.next = 5;\n                return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n\n              case 5:\n                success = _context.sent;\n\n                if (success) {\n                  context === null || context === void 0 ? void 0 : context.next();\n                }\n\n                context === null || context === void 0 ? void 0 : context.setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 9:\n                if (!(context === null || context === void 0 ? void 0 : context.lastStep)) context === null || context === void 0 ? void 0 : context.next();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\n\nexport default StepForm;"]},"metadata":{},"sourceType":"module"}