{"ast":null,"code":"import \"antd/es/menu/style\";\nimport _Menu from \"antd/es/menu\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/skeleton/style\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport Icon, { createFromIconfontCN } from '@ant-design/icons';\nimport { isImg, isUrl, useMountMergeState } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport defaultSettings from '../../defaultSettings';\nimport { getOpenKeysFromMenuData } from '../../utils/utils';\nimport MenuCounter from './Counter';\nimport './index.less';\nvar IconFont = createFromIconfontCN({\n  scriptUrl: defaultSettings.iconfontUrl\n}); // Allow menu.js config icon as string or ReactNode\n//   icon: 'setting',\n//   icon: 'icon-geren' #For Iconfont ,\n//   icon: 'http://demo.com/icon.png',\n//   icon: '/favicon.png',\n//   icon: <Icon type=\"setting\" />,\n\nvar getIcon = function getIcon(icon) {\n  var iconPrefixes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'icon-';\n\n  if (typeof icon === 'string' && icon !== '') {\n    if (isUrl(icon) || isImg(icon)) {\n      return /*#__PURE__*/React.createElement(Icon, {\n        component: function component() {\n          return /*#__PURE__*/React.createElement(\"img\", {\n            src: icon,\n            alt: \"icon\",\n            className: \"ant-pro-sider-menu-icon\"\n          });\n        }\n      });\n    }\n\n    if (icon.startsWith(iconPrefixes)) {\n      return /*#__PURE__*/React.createElement(IconFont, {\n        type: icon\n      });\n    }\n  }\n\n  return icon;\n};\n\nvar MenuUtil = /*#__PURE__*/_createClass(function MenuUtil(props) {\n  var _this = this;\n\n  _classCallCheck(this, MenuUtil);\n\n  this.props = void 0;\n\n  this.getNavMenuItems = function () {\n    var menusData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var isChildren = arguments.length > 1 ? arguments[1] : undefined;\n    return menusData.map(function (item) {\n      return _this.getSubMenuOrItem(item, isChildren);\n    }).filter(function (item) {\n      return item;\n    });\n  };\n\n  this.getSubMenuOrItem = function (item, isChildren) {\n    var children = (item === null || item === void 0 ? void 0 : item.children) || (item === null || item === void 0 ? void 0 : item.routes);\n\n    if (Array.isArray(children) && children.length > 0) {\n      var name = _this.getIntlName(item);\n\n      var _this$props = _this.props,\n          subMenuItemRender = _this$props.subMenuItemRender,\n          prefixCls = _this$props.prefixCls,\n          menu = _this$props.menu,\n          iconPrefixes = _this$props.iconPrefixes; //  get defaultTitle by menuItemRender\n\n      var defaultTitle = item.icon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item\"),\n        title: name\n      }, !isChildren && getIcon(item.icon, iconPrefixes), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item-title\")\n      }, name)) : /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item\"),\n        title: name\n      }, name); // subMenu only title render\n\n      var title = subMenuItemRender ? subMenuItemRender(_objectSpread(_objectSpread({}, item), {}, {\n        isUrl: false\n      }), defaultTitle, _this.props) : defaultTitle;\n      return {\n        type: (menu === null || menu === void 0 ? void 0 : menu.type) === 'group' ? 'group' : undefined,\n        label: title,\n        children: _this.getNavMenuItems(children, true),\n        onTitleClick: item.onTitleClick,\n        key: item.key || item.path\n      };\n    }\n\n    return {\n      label: _this.getMenuItemPath(item, isChildren),\n      title: _this.getIntlName(item),\n      key: item.key || item.path,\n      disabled: item.disabled,\n      onClick: function onClick(e) {\n        var _item$onTitleClick;\n\n        if (isUrl(item === null || item === void 0 ? void 0 : item.path)) {\n          window.open(item.path);\n        }\n\n        (_item$onTitleClick = item.onTitleClick) === null || _item$onTitleClick === void 0 ? void 0 : _item$onTitleClick.call(item, e);\n      }\n    };\n  };\n\n  this.getIntlName = function (item) {\n    var name = item.name,\n        locale = item.locale;\n    var _this$props2 = _this.props,\n        menu = _this$props2.menu,\n        formatMessage = _this$props2.formatMessage;\n\n    if (locale && (menu === null || menu === void 0 ? void 0 : menu.locale) !== false) {\n      return formatMessage === null || formatMessage === void 0 ? void 0 : formatMessage({\n        id: locale,\n        defaultMessage: name\n      });\n    }\n\n    return name;\n  };\n\n  this.getMenuItemPath = function (item, isChildren) {\n    var itemPath = _this.conversionPath(item.path || '/');\n\n    var _this$props3 = _this.props,\n        _this$props3$location = _this$props3.location,\n        location = _this$props3$location === void 0 ? {\n      pathname: '/'\n    } : _this$props3$location,\n        isMobile = _this$props3.isMobile,\n        onCollapse = _this$props3.onCollapse,\n        menuItemRender = _this$props3.menuItemRender,\n        iconPrefixes = _this$props3.iconPrefixes; // if local is true formatMessage all name。\n\n    var name = _this.getIntlName(item);\n\n    var prefixCls = _this.props.prefixCls;\n    var icon = isChildren ? null : getIcon(item.icon, iconPrefixes);\n    var isHttpUrl = isUrl(itemPath);\n    var defaultItem = /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(prefixCls, \"-menu-item\"), _defineProperty({}, \"\".concat(prefixCls, \"-menu-item-link\"), isHttpUrl))\n    }, icon, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-menu-item-title\")\n    }, name));\n\n    if (menuItemRender) {\n      var renderItemProps = _objectSpread(_objectSpread({}, item), {}, {\n        isUrl: isHttpUrl,\n        itemPath: itemPath,\n        isMobile: isMobile,\n        replace: itemPath === location.pathname,\n        onClick: function onClick() {\n          if (isHttpUrl) window.open(itemPath);\n          if (onCollapse) onCollapse(true);\n        },\n        children: undefined\n      });\n\n      return menuItemRender(renderItemProps, defaultItem, _this.props);\n    }\n\n    return defaultItem;\n  };\n\n  this.conversionPath = function (path) {\n    if (path && path.indexOf('http') === 0) {\n      return path;\n    }\n\n    return \"/\".concat(path || '').replace(/\\/+/g, '/');\n  };\n\n  this.props = props;\n});\n/**\n * 生成openKeys 的对象，因为设置了openKeys 就会变成受控，所以需要一个空对象\n *\n * @param BaseMenuProps\n */\n\n\nvar getOpenKeysProps = function getOpenKeysProps(openKeys, _ref) {\n  var layout = _ref.layout,\n      collapsed = _ref.collapsed;\n  var openKeysProps = {};\n\n  if (openKeys && !collapsed && ['side', 'mix'].includes(layout || 'mix')) {\n    openKeysProps = {\n      openKeys: openKeys\n    };\n  }\n\n  return openKeysProps;\n};\n\nvar BaseMenu = function BaseMenu(props) {\n  var theme = props.theme,\n      mode = props.mode,\n      className = props.className,\n      handleOpenChange = props.handleOpenChange,\n      style = props.style,\n      menuData = props.menuData,\n      menu = props.menu,\n      matchMenuKeys = props.matchMenuKeys,\n      iconfontUrl = props.iconfontUrl,\n      collapsed = props.collapsed,\n      propsSelectedKeys = props.selectedKeys,\n      onSelect = props.onSelect,\n      propsOpenKeys = props.openKeys; // 用于减少 defaultOpenKeys 计算的组件\n\n  var defaultOpenKeysRef = useRef([]);\n\n  var _MenuCounter$useConta = MenuCounter.useContainer(),\n      flatMenuKeys = _MenuCounter$useConta.flatMenuKeys;\n\n  var _useMountMergeState = useMountMergeState(menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      defaultOpenAll = _useMountMergeState2[0],\n      setDefaultOpenAll = _useMountMergeState2[1];\n\n  var _useMountMergeState3 = useMountMergeState(function () {\n    if (menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll) {\n      return getOpenKeysFromMenuData(menuData) || [];\n    }\n\n    if (propsOpenKeys === false) {\n      return false;\n    }\n\n    return [];\n  }, {\n    value: propsOpenKeys === false ? undefined : propsOpenKeys,\n    onChange: handleOpenChange\n  }),\n      _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n      openKeys = _useMountMergeState4[0],\n      setOpenKeys = _useMountMergeState4[1];\n\n  var _useMountMergeState5 = useMountMergeState([], {\n    value: propsSelectedKeys,\n    onChange: onSelect ? function (keys) {\n      if (onSelect && keys) {\n        onSelect(keys);\n      }\n    } : undefined\n  }),\n      _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n      selectedKeys = _useMountMergeState6[0],\n      setSelectedKeys = _useMountMergeState6[1];\n\n  useEffect(function () {\n    if ((menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll) || propsOpenKeys === false || flatMenuKeys.length) {\n      return;\n    }\n\n    if (matchMenuKeys) {\n      setOpenKeys(matchMenuKeys);\n      setSelectedKeys(matchMenuKeys);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [matchMenuKeys.join('-')]);\n  useEffect(function () {\n    // reset IconFont\n    if (iconfontUrl) {\n      IconFont = createFromIconfontCN({\n        scriptUrl: iconfontUrl\n      });\n    }\n  }, [iconfontUrl]);\n  useEffect(function () {\n    // if pathname can't match, use the nearest parent's key\n    if (matchMenuKeys.join('-') !== (selectedKeys || []).join('-')) {\n      setSelectedKeys(matchMenuKeys);\n    }\n\n    if (!defaultOpenAll && propsOpenKeys !== false && matchMenuKeys.join('-') !== (openKeys || []).join('-')) {\n      var newKeys = matchMenuKeys; // 如果不自动关闭，我需要把 openKeys 放进去\n\n      if ((menu === null || menu === void 0 ? void 0 : menu.autoClose) === false) {\n        newKeys = Array.from(new Set([].concat(_toConsumableArray(matchMenuKeys), _toConsumableArray(openKeys || []))));\n      }\n\n      setOpenKeys(newKeys);\n    } else if ((menu === null || menu === void 0 ? void 0 : menu.ignoreFlatMenu) && defaultOpenAll) {\n      // 忽略用户手动折叠过的菜单状态，折叠按钮切换之后也可实现默认展开所有菜单\n      setOpenKeys(getOpenKeysFromMenuData(menuData));\n    } else if (flatMenuKeys.length > 0) setDefaultOpenAll(false); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [matchMenuKeys.join('-'), collapsed]);\n  var openKeysProps = useMemo(function () {\n    return getOpenKeysProps(openKeys, props);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [openKeys && openKeys.join(','), props.layout, props.collapsed]);\n\n  var _useState = useState(function () {\n    return new MenuUtil(props);\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      menuUtils = _useState2[0];\n\n  if (menu === null || menu === void 0 ? void 0 : menu.loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: (mode === null || mode === void 0 ? void 0 : mode.includes('inline')) ? {\n        padding: 24\n      } : {\n        marginTop: 16\n      }\n    }, /*#__PURE__*/React.createElement(_Skeleton, {\n      active: true,\n      title: false,\n      paragraph: {\n        rows: (mode === null || mode === void 0 ? void 0 : mode.includes('inline')) ? 6 : 1\n      }\n    }));\n  }\n\n  var cls = classNames(className, {\n    'top-nav-menu': mode === 'horizontal'\n  }); // sync props\n\n  menuUtils.props = props; // 这次 openKeys === false 的时候的情况，这种情况下帮用户选中一次\n  // 第二此不会使用，所以用了 defaultOpenKeys\n  // 这里返回 null，是为了让 defaultOpenKeys 生效\n\n  if (props.openKeys === false && !props.handleOpenChange) {\n    defaultOpenKeysRef.current = matchMenuKeys;\n  }\n\n  var finallyData = props.postMenuData ? props.postMenuData(menuData) : menuData;\n\n  if (finallyData && (finallyData === null || finallyData === void 0 ? void 0 : finallyData.length) < 1) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(_Menu, _extends({}, openKeysProps, {\n    key: \"Menu\",\n    mode: mode,\n    items: menuUtils.getNavMenuItems(finallyData, false),\n    inlineIndent: 16,\n    defaultOpenKeys: defaultOpenKeysRef.current,\n    theme: theme,\n    selectedKeys: selectedKeys,\n    style: style,\n    className: cls,\n    onOpenChange: setOpenKeys\n  }, props.menuProps));\n};\n\nBaseMenu.defaultProps = {\n  postMenuData: function postMenuData(data) {\n    return data || [];\n  }\n};\nexport default BaseMenu;","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-layout/es/components/SiderMenu/BaseMenu.js"],"names":["_Menu","_extends","_Skeleton","_toConsumableArray","_slicedToArray","_defineProperty","_objectSpread","_createClass","_classCallCheck","Icon","createFromIconfontCN","isImg","isUrl","useMountMergeState","classNames","React","useEffect","useMemo","useRef","useState","defaultSettings","getOpenKeysFromMenuData","MenuCounter","IconFont","scriptUrl","iconfontUrl","getIcon","icon","iconPrefixes","arguments","length","undefined","createElement","component","src","alt","className","startsWith","type","MenuUtil","props","_this","getNavMenuItems","menusData","isChildren","map","item","getSubMenuOrItem","filter","children","routes","Array","isArray","name","getIntlName","_this$props","subMenuItemRender","prefixCls","menu","defaultTitle","concat","title","label","onTitleClick","key","path","getMenuItemPath","disabled","onClick","e","_item$onTitleClick","window","open","call","locale","_this$props2","formatMessage","id","defaultMessage","itemPath","conversionPath","_this$props3","_this$props3$location","location","pathname","isMobile","onCollapse","menuItemRender","isHttpUrl","defaultItem","renderItemProps","replace","indexOf","getOpenKeysProps","openKeys","_ref","layout","collapsed","openKeysProps","includes","BaseMenu","theme","mode","handleOpenChange","style","menuData","matchMenuKeys","propsSelectedKeys","selectedKeys","onSelect","propsOpenKeys","defaultOpenKeysRef","_MenuCounter$useConta","useContainer","flatMenuKeys","_useMountMergeState","defaultOpenAll","_useMountMergeState2","setDefaultOpenAll","_useMountMergeState3","value","onChange","_useMountMergeState4","setOpenKeys","_useMountMergeState5","keys","_useMountMergeState6","setSelectedKeys","join","newKeys","autoClose","from","Set","ignoreFlatMenu","_useState","_useState2","menuUtils","loading","padding","marginTop","active","paragraph","rows","cls","current","finallyData","postMenuData","items","inlineIndent","defaultOpenKeys","onOpenChange","menuProps","defaultProps","data"],"mappings":"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","sourcesContent":["import \"antd/es/menu/style\";\nimport _Menu from \"antd/es/menu\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/skeleton/style\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport Icon, { createFromIconfontCN } from '@ant-design/icons';\nimport { isImg, isUrl, useMountMergeState } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport defaultSettings from '../../defaultSettings';\nimport { getOpenKeysFromMenuData } from '../../utils/utils';\nimport MenuCounter from './Counter';\nimport './index.less';\nvar IconFont = createFromIconfontCN({\n  scriptUrl: defaultSettings.iconfontUrl\n}); // Allow menu.js config icon as string or ReactNode\n//   icon: 'setting',\n//   icon: 'icon-geren' #For Iconfont ,\n//   icon: 'http://demo.com/icon.png',\n//   icon: '/favicon.png',\n//   icon: <Icon type=\"setting\" />,\n\nvar getIcon = function getIcon(icon) {\n  var iconPrefixes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'icon-';\n\n  if (typeof icon === 'string' && icon !== '') {\n    if (isUrl(icon) || isImg(icon)) {\n      return /*#__PURE__*/React.createElement(Icon, {\n        component: function component() {\n          return /*#__PURE__*/React.createElement(\"img\", {\n            src: icon,\n            alt: \"icon\",\n            className: \"ant-pro-sider-menu-icon\"\n          });\n        }\n      });\n    }\n\n    if (icon.startsWith(iconPrefixes)) {\n      return /*#__PURE__*/React.createElement(IconFont, {\n        type: icon\n      });\n    }\n  }\n\n  return icon;\n};\n\nvar MenuUtil = /*#__PURE__*/_createClass(function MenuUtil(props) {\n  var _this = this;\n\n  _classCallCheck(this, MenuUtil);\n\n  this.props = void 0;\n\n  this.getNavMenuItems = function () {\n    var menusData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var isChildren = arguments.length > 1 ? arguments[1] : undefined;\n    return menusData.map(function (item) {\n      return _this.getSubMenuOrItem(item, isChildren);\n    }).filter(function (item) {\n      return item;\n    });\n  };\n\n  this.getSubMenuOrItem = function (item, isChildren) {\n    var children = (item === null || item === void 0 ? void 0 : item.children) || (item === null || item === void 0 ? void 0 : item.routes);\n\n    if (Array.isArray(children) && children.length > 0) {\n      var name = _this.getIntlName(item);\n\n      var _this$props = _this.props,\n          subMenuItemRender = _this$props.subMenuItemRender,\n          prefixCls = _this$props.prefixCls,\n          menu = _this$props.menu,\n          iconPrefixes = _this$props.iconPrefixes; //  get defaultTitle by menuItemRender\n\n      var defaultTitle = item.icon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item\"),\n        title: name\n      }, !isChildren && getIcon(item.icon, iconPrefixes), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item-title\")\n      }, name)) : /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item\"),\n        title: name\n      }, name); // subMenu only title render\n\n      var title = subMenuItemRender ? subMenuItemRender(_objectSpread(_objectSpread({}, item), {}, {\n        isUrl: false\n      }), defaultTitle, _this.props) : defaultTitle;\n      return {\n        type: (menu === null || menu === void 0 ? void 0 : menu.type) === 'group' ? 'group' : undefined,\n        label: title,\n        children: _this.getNavMenuItems(children, true),\n        onTitleClick: item.onTitleClick,\n        key: item.key || item.path\n      };\n    }\n\n    return {\n      label: _this.getMenuItemPath(item, isChildren),\n      title: _this.getIntlName(item),\n      key: item.key || item.path,\n      disabled: item.disabled,\n      onClick: function onClick(e) {\n        var _item$onTitleClick;\n\n        if (isUrl(item === null || item === void 0 ? void 0 : item.path)) {\n          window.open(item.path);\n        }\n\n        (_item$onTitleClick = item.onTitleClick) === null || _item$onTitleClick === void 0 ? void 0 : _item$onTitleClick.call(item, e);\n      }\n    };\n  };\n\n  this.getIntlName = function (item) {\n    var name = item.name,\n        locale = item.locale;\n    var _this$props2 = _this.props,\n        menu = _this$props2.menu,\n        formatMessage = _this$props2.formatMessage;\n\n    if (locale && (menu === null || menu === void 0 ? void 0 : menu.locale) !== false) {\n      return formatMessage === null || formatMessage === void 0 ? void 0 : formatMessage({\n        id: locale,\n        defaultMessage: name\n      });\n    }\n\n    return name;\n  };\n\n  this.getMenuItemPath = function (item, isChildren) {\n    var itemPath = _this.conversionPath(item.path || '/');\n\n    var _this$props3 = _this.props,\n        _this$props3$location = _this$props3.location,\n        location = _this$props3$location === void 0 ? {\n      pathname: '/'\n    } : _this$props3$location,\n        isMobile = _this$props3.isMobile,\n        onCollapse = _this$props3.onCollapse,\n        menuItemRender = _this$props3.menuItemRender,\n        iconPrefixes = _this$props3.iconPrefixes; // if local is true formatMessage all name。\n\n    var name = _this.getIntlName(item);\n\n    var prefixCls = _this.props.prefixCls;\n    var icon = isChildren ? null : getIcon(item.icon, iconPrefixes);\n    var isHttpUrl = isUrl(itemPath);\n    var defaultItem = /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(prefixCls, \"-menu-item\"), _defineProperty({}, \"\".concat(prefixCls, \"-menu-item-link\"), isHttpUrl))\n    }, icon, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-menu-item-title\")\n    }, name));\n\n    if (menuItemRender) {\n      var renderItemProps = _objectSpread(_objectSpread({}, item), {}, {\n        isUrl: isHttpUrl,\n        itemPath: itemPath,\n        isMobile: isMobile,\n        replace: itemPath === location.pathname,\n        onClick: function onClick() {\n          if (isHttpUrl) window.open(itemPath);\n          if (onCollapse) onCollapse(true);\n        },\n        children: undefined\n      });\n\n      return menuItemRender(renderItemProps, defaultItem, _this.props);\n    }\n\n    return defaultItem;\n  };\n\n  this.conversionPath = function (path) {\n    if (path && path.indexOf('http') === 0) {\n      return path;\n    }\n\n    return \"/\".concat(path || '').replace(/\\/+/g, '/');\n  };\n\n  this.props = props;\n});\n/**\n * 生成openKeys 的对象，因为设置了openKeys 就会变成受控，所以需要一个空对象\n *\n * @param BaseMenuProps\n */\n\n\nvar getOpenKeysProps = function getOpenKeysProps(openKeys, _ref) {\n  var layout = _ref.layout,\n      collapsed = _ref.collapsed;\n  var openKeysProps = {};\n\n  if (openKeys && !collapsed && ['side', 'mix'].includes(layout || 'mix')) {\n    openKeysProps = {\n      openKeys: openKeys\n    };\n  }\n\n  return openKeysProps;\n};\n\nvar BaseMenu = function BaseMenu(props) {\n  var theme = props.theme,\n      mode = props.mode,\n      className = props.className,\n      handleOpenChange = props.handleOpenChange,\n      style = props.style,\n      menuData = props.menuData,\n      menu = props.menu,\n      matchMenuKeys = props.matchMenuKeys,\n      iconfontUrl = props.iconfontUrl,\n      collapsed = props.collapsed,\n      propsSelectedKeys = props.selectedKeys,\n      onSelect = props.onSelect,\n      propsOpenKeys = props.openKeys; // 用于减少 defaultOpenKeys 计算的组件\n\n  var defaultOpenKeysRef = useRef([]);\n\n  var _MenuCounter$useConta = MenuCounter.useContainer(),\n      flatMenuKeys = _MenuCounter$useConta.flatMenuKeys;\n\n  var _useMountMergeState = useMountMergeState(menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      defaultOpenAll = _useMountMergeState2[0],\n      setDefaultOpenAll = _useMountMergeState2[1];\n\n  var _useMountMergeState3 = useMountMergeState(function () {\n    if (menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll) {\n      return getOpenKeysFromMenuData(menuData) || [];\n    }\n\n    if (propsOpenKeys === false) {\n      return false;\n    }\n\n    return [];\n  }, {\n    value: propsOpenKeys === false ? undefined : propsOpenKeys,\n    onChange: handleOpenChange\n  }),\n      _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n      openKeys = _useMountMergeState4[0],\n      setOpenKeys = _useMountMergeState4[1];\n\n  var _useMountMergeState5 = useMountMergeState([], {\n    value: propsSelectedKeys,\n    onChange: onSelect ? function (keys) {\n      if (onSelect && keys) {\n        onSelect(keys);\n      }\n    } : undefined\n  }),\n      _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n      selectedKeys = _useMountMergeState6[0],\n      setSelectedKeys = _useMountMergeState6[1];\n\n  useEffect(function () {\n    if ((menu === null || menu === void 0 ? void 0 : menu.defaultOpenAll) || propsOpenKeys === false || flatMenuKeys.length) {\n      return;\n    }\n\n    if (matchMenuKeys) {\n      setOpenKeys(matchMenuKeys);\n      setSelectedKeys(matchMenuKeys);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [matchMenuKeys.join('-')]);\n  useEffect(function () {\n    // reset IconFont\n    if (iconfontUrl) {\n      IconFont = createFromIconfontCN({\n        scriptUrl: iconfontUrl\n      });\n    }\n  }, [iconfontUrl]);\n  useEffect(function () {\n    // if pathname can't match, use the nearest parent's key\n    if (matchMenuKeys.join('-') !== (selectedKeys || []).join('-')) {\n      setSelectedKeys(matchMenuKeys);\n    }\n\n    if (!defaultOpenAll && propsOpenKeys !== false && matchMenuKeys.join('-') !== (openKeys || []).join('-')) {\n      var newKeys = matchMenuKeys; // 如果不自动关闭，我需要把 openKeys 放进去\n\n      if ((menu === null || menu === void 0 ? void 0 : menu.autoClose) === false) {\n        newKeys = Array.from(new Set([].concat(_toConsumableArray(matchMenuKeys), _toConsumableArray(openKeys || []))));\n      }\n\n      setOpenKeys(newKeys);\n    } else if ((menu === null || menu === void 0 ? void 0 : menu.ignoreFlatMenu) && defaultOpenAll) {\n      // 忽略用户手动折叠过的菜单状态，折叠按钮切换之后也可实现默认展开所有菜单\n      setOpenKeys(getOpenKeysFromMenuData(menuData));\n    } else if (flatMenuKeys.length > 0) setDefaultOpenAll(false); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [matchMenuKeys.join('-'), collapsed]);\n  var openKeysProps = useMemo(function () {\n    return getOpenKeysProps(openKeys, props);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [openKeys && openKeys.join(','), props.layout, props.collapsed]);\n\n  var _useState = useState(function () {\n    return new MenuUtil(props);\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      menuUtils = _useState2[0];\n\n  if (menu === null || menu === void 0 ? void 0 : menu.loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: (mode === null || mode === void 0 ? void 0 : mode.includes('inline')) ? {\n        padding: 24\n      } : {\n        marginTop: 16\n      }\n    }, /*#__PURE__*/React.createElement(_Skeleton, {\n      active: true,\n      title: false,\n      paragraph: {\n        rows: (mode === null || mode === void 0 ? void 0 : mode.includes('inline')) ? 6 : 1\n      }\n    }));\n  }\n\n  var cls = classNames(className, {\n    'top-nav-menu': mode === 'horizontal'\n  }); // sync props\n\n  menuUtils.props = props; // 这次 openKeys === false 的时候的情况，这种情况下帮用户选中一次\n  // 第二此不会使用，所以用了 defaultOpenKeys\n  // 这里返回 null，是为了让 defaultOpenKeys 生效\n\n  if (props.openKeys === false && !props.handleOpenChange) {\n    defaultOpenKeysRef.current = matchMenuKeys;\n  }\n\n  var finallyData = props.postMenuData ? props.postMenuData(menuData) : menuData;\n\n  if (finallyData && (finallyData === null || finallyData === void 0 ? void 0 : finallyData.length) < 1) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(_Menu, _extends({}, openKeysProps, {\n    key: \"Menu\",\n    mode: mode,\n    items: menuUtils.getNavMenuItems(finallyData, false),\n    inlineIndent: 16,\n    defaultOpenKeys: defaultOpenKeysRef.current,\n    theme: theme,\n    selectedKeys: selectedKeys,\n    style: style,\n    className: cls,\n    onOpenChange: setOpenKeys\n  }, props.menuProps));\n};\n\nBaseMenu.defaultProps = {\n  postMenuData: function postMenuData(data) {\n    return data || [];\n  }\n};\nexport default BaseMenu;"]},"metadata":{},"sourceType":"module"}