{"ast":null,"code":"import \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/time-picker/style\";\nimport _TimePicker from \"antd/es/time-picker\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { FieldLabel, parseValueToMoment } from '@ant-design/pro-utils';\nimport moment from 'moment';\nimport React, { useContext, useState } from 'react';\n/**\n * 时间选择组件\n *\n * @param\n */\n\nvar FieldTimePicker = function FieldTimePicker(_ref, ref) {\n  var text = _ref.text,\n      mode = _ref.mode,\n      light = _ref.light,\n      label = _ref.label,\n      format = _ref.format,\n      render = _ref.render,\n      renderFormItem = _ref.renderFormItem,\n      plain = _ref.plain,\n      fieldProps = _ref.fieldProps,\n      lightLabel = _ref.lightLabel,\n      labelTrigger = _ref.labelTrigger;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var size = useContext(_ConfigProvider.SizeContext);\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-field-date-picker');\n  var finalFormat = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format) || format || 'HH:mm:ss';\n  var isNumberOrMoment = moment.isMoment(text) || typeof text === 'number';\n\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/React.createElement(\"span\", {\n      ref: ref\n    }, text ? moment(text, isNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '-');\n\n    if (render) {\n      return render(text, _objectSpread({\n        mode: mode\n      }, fieldProps), /*#__PURE__*/React.createElement(\"span\", null, dom));\n    }\n\n    return dom;\n  }\n\n  if (mode === 'edit' || mode === 'update') {\n    var _dom;\n\n    var disabled = fieldProps.disabled,\n        _onChange = fieldProps.onChange,\n        placeholder = fieldProps.placeholder,\n        allowClear = fieldProps.allowClear,\n        value = fieldProps.value;\n    var momentValue = parseValueToMoment(value, finalFormat);\n\n    if (light) {\n      var valueStr = momentValue && momentValue.format(finalFormat) || '';\n      _dom = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-light\"),\n        onClick: function onClick(e) {\n          var _lightLabel$current, _lightLabel$current$l, _lightLabel$current$l2; // 点击label切换下拉菜单\n\n\n          var isLabelClick = lightLabel === null || lightLabel === void 0 ? void 0 : (_lightLabel$current = lightLabel.current) === null || _lightLabel$current === void 0 ? void 0 : (_lightLabel$current$l = _lightLabel$current.labelRef) === null || _lightLabel$current$l === void 0 ? void 0 : (_lightLabel$current$l2 = _lightLabel$current$l.current) === null || _lightLabel$current$l2 === void 0 ? void 0 : _lightLabel$current$l2.contains(e.target);\n\n          if (isLabelClick) {\n            setOpen(!open);\n          } else {\n            setOpen(true);\n          }\n        }\n      }, /*#__PURE__*/React.createElement(_TimePicker, _extends({\n        value: momentValue,\n        format: format,\n        ref: ref\n      }, fieldProps, {\n        onChange: function onChange(v) {\n          _onChange === null || _onChange === void 0 ? void 0 : _onChange(v);\n          setTimeout(function () {\n            setOpen(false);\n          }, 0);\n        },\n        onOpenChange: function onOpenChange(isOpen) {\n          if (!labelTrigger) {\n            setOpen(isOpen);\n          }\n        },\n        open: open\n      })), /*#__PURE__*/React.createElement(FieldLabel, {\n        label: label,\n        disabled: disabled,\n        placeholder: placeholder,\n        size: size,\n        value: valueStr,\n        allowClear: allowClear,\n        onClear: function onClear() {\n          return _onChange === null || _onChange === void 0 ? void 0 : _onChange(null);\n        },\n        expanded: open,\n        ref: lightLabel\n      }));\n    } else {\n      _dom = /*#__PURE__*/React.createElement(_DatePicker.TimePicker, _extends({\n        ref: ref,\n        format: format,\n        bordered: plain === undefined ? true : !plain\n      }, fieldProps, {\n        value: momentValue\n      }));\n    }\n\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: mode\n      }, fieldProps), _dom);\n    }\n\n    return _dom;\n  }\n\n  return null;\n};\n/**\n * 时间区间选择\n *\n * @param param0\n * @param ref\n */\n\n\nvar FieldTimeRangePicker = function FieldTimeRangePicker(_ref2) {\n  var text = _ref2.text,\n      mode = _ref2.mode,\n      format = _ref2.format,\n      render = _ref2.render,\n      renderFormItem = _ref2.renderFormItem,\n      plain = _ref2.plain,\n      fieldProps = _ref2.fieldProps;\n  var finalFormat = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format) || format || 'HH:mm:ss';\n\n  var _ref3 = Array.isArray(text) ? text : [],\n      _ref4 = _slicedToArray(_ref3, 2),\n      startText = _ref4[0],\n      endText = _ref4[1];\n\n  var startTextIsNumberOrMoment = moment.isMoment(startText) || typeof startText === 'number';\n  var endTextIsNumberOrMoment = moment.isMoment(endText) || typeof endText === 'number';\n  var parsedStartText = startText ? moment(startText, startTextIsNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '';\n  var parsedEndText = endText ? moment(endText, endTextIsNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '';\n\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", null, parsedStartText || '-'), /*#__PURE__*/React.createElement(\"div\", null, parsedEndText || '-'));\n\n    if (render) {\n      return render(text, _objectSpread({\n        mode: mode\n      }, fieldProps), /*#__PURE__*/React.createElement(\"span\", null, dom));\n    }\n\n    return dom;\n  }\n\n  if (mode === 'edit' || mode === 'update') {\n    var value = fieldProps.value;\n    var momentValue = parseValueToMoment(value, finalFormat);\n\n    var _dom2 = /*#__PURE__*/React.createElement(_TimePicker.RangePicker, _extends({\n      format: format,\n      bordered: plain === undefined ? true : !plain\n    }, fieldProps, {\n      value: momentValue\n    }));\n\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: mode\n      }, fieldProps), _dom2);\n    }\n\n    return _dom2;\n  }\n\n  return null;\n};\n\nexport { FieldTimeRangePicker };\nexport default /*#__PURE__*/React.forwardRef(FieldTimePicker);","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-field/es/components/TimePicker/index.js"],"names":["_DatePicker","_TimePicker","_extends","_objectSpread","_ConfigProvider","_slicedToArray","FieldLabel","parseValueToMoment","moment","React","useContext","useState","FieldTimePicker","_ref","ref","text","mode","light","label","format","render","renderFormItem","plain","fieldProps","lightLabel","labelTrigger","_useState","_useState2","open","setOpen","size","SizeContext","_useContext","ConfigContext","getPrefixCls","prefixCls","finalFormat","isNumberOrMoment","isMoment","dom","createElement","undefined","_dom","disabled","_onChange","onChange","placeholder","allowClear","value","momentValue","valueStr","className","concat","onClick","e","_lightLabel$current","_lightLabel$current$l","_lightLabel$current$l2","isLabelClick","current","labelRef","contains","target","v","setTimeout","onOpenChange","isOpen","onClear","expanded","TimePicker","bordered","FieldTimeRangePicker","_ref2","_ref3","Array","isArray","_ref4","startText","endText","startTextIsNumberOrMoment","endTextIsNumberOrMoment","parsedStartText","parsedEndText","_dom2","RangePicker","forwardRef"],"mappings":"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","sourcesContent":["import \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/time-picker/style\";\nimport _TimePicker from \"antd/es/time-picker\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { FieldLabel, parseValueToMoment } from '@ant-design/pro-utils';\nimport moment from 'moment';\nimport React, { useContext, useState } from 'react';\n/**\n * 时间选择组件\n *\n * @param\n */\n\nvar FieldTimePicker = function FieldTimePicker(_ref, ref) {\n  var text = _ref.text,\n      mode = _ref.mode,\n      light = _ref.light,\n      label = _ref.label,\n      format = _ref.format,\n      render = _ref.render,\n      renderFormItem = _ref.renderFormItem,\n      plain = _ref.plain,\n      fieldProps = _ref.fieldProps,\n      lightLabel = _ref.lightLabel,\n      labelTrigger = _ref.labelTrigger;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var size = useContext(_ConfigProvider.SizeContext);\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-field-date-picker');\n  var finalFormat = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format) || format || 'HH:mm:ss';\n  var isNumberOrMoment = moment.isMoment(text) || typeof text === 'number';\n\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/React.createElement(\"span\", {\n      ref: ref\n    }, text ? moment(text, isNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '-');\n\n    if (render) {\n      return render(text, _objectSpread({\n        mode: mode\n      }, fieldProps), /*#__PURE__*/React.createElement(\"span\", null, dom));\n    }\n\n    return dom;\n  }\n\n  if (mode === 'edit' || mode === 'update') {\n    var _dom;\n\n    var disabled = fieldProps.disabled,\n        _onChange = fieldProps.onChange,\n        placeholder = fieldProps.placeholder,\n        allowClear = fieldProps.allowClear,\n        value = fieldProps.value;\n    var momentValue = parseValueToMoment(value, finalFormat);\n\n    if (light) {\n      var valueStr = momentValue && momentValue.format(finalFormat) || '';\n      _dom = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-light\"),\n        onClick: function onClick(e) {\n          var _lightLabel$current, _lightLabel$current$l, _lightLabel$current$l2;\n\n          // 点击label切换下拉菜单\n          var isLabelClick = lightLabel === null || lightLabel === void 0 ? void 0 : (_lightLabel$current = lightLabel.current) === null || _lightLabel$current === void 0 ? void 0 : (_lightLabel$current$l = _lightLabel$current.labelRef) === null || _lightLabel$current$l === void 0 ? void 0 : (_lightLabel$current$l2 = _lightLabel$current$l.current) === null || _lightLabel$current$l2 === void 0 ? void 0 : _lightLabel$current$l2.contains(e.target);\n\n          if (isLabelClick) {\n            setOpen(!open);\n          } else {\n            setOpen(true);\n          }\n        }\n      }, /*#__PURE__*/React.createElement(_TimePicker, _extends({\n        value: momentValue,\n        format: format,\n        ref: ref\n      }, fieldProps, {\n        onChange: function onChange(v) {\n          _onChange === null || _onChange === void 0 ? void 0 : _onChange(v);\n          setTimeout(function () {\n            setOpen(false);\n          }, 0);\n        },\n        onOpenChange: function onOpenChange(isOpen) {\n          if (!labelTrigger) {\n            setOpen(isOpen);\n          }\n        },\n        open: open\n      })), /*#__PURE__*/React.createElement(FieldLabel, {\n        label: label,\n        disabled: disabled,\n        placeholder: placeholder,\n        size: size,\n        value: valueStr,\n        allowClear: allowClear,\n        onClear: function onClear() {\n          return _onChange === null || _onChange === void 0 ? void 0 : _onChange(null);\n        },\n        expanded: open,\n        ref: lightLabel\n      }));\n    } else {\n      _dom = /*#__PURE__*/React.createElement(_DatePicker.TimePicker, _extends({\n        ref: ref,\n        format: format,\n        bordered: plain === undefined ? true : !plain\n      }, fieldProps, {\n        value: momentValue\n      }));\n    }\n\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: mode\n      }, fieldProps), _dom);\n    }\n\n    return _dom;\n  }\n\n  return null;\n};\n/**\n * 时间区间选择\n *\n * @param param0\n * @param ref\n */\n\n\nvar FieldTimeRangePicker = function FieldTimeRangePicker(_ref2) {\n  var text = _ref2.text,\n      mode = _ref2.mode,\n      format = _ref2.format,\n      render = _ref2.render,\n      renderFormItem = _ref2.renderFormItem,\n      plain = _ref2.plain,\n      fieldProps = _ref2.fieldProps;\n  var finalFormat = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.format) || format || 'HH:mm:ss';\n\n  var _ref3 = Array.isArray(text) ? text : [],\n      _ref4 = _slicedToArray(_ref3, 2),\n      startText = _ref4[0],\n      endText = _ref4[1];\n\n  var startTextIsNumberOrMoment = moment.isMoment(startText) || typeof startText === 'number';\n  var endTextIsNumberOrMoment = moment.isMoment(endText) || typeof endText === 'number';\n  var parsedStartText = startText ? moment(startText, startTextIsNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '';\n  var parsedEndText = endText ? moment(endText, endTextIsNumberOrMoment ? undefined : finalFormat).format(finalFormat) : '';\n\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", null, parsedStartText || '-'), /*#__PURE__*/React.createElement(\"div\", null, parsedEndText || '-'));\n\n    if (render) {\n      return render(text, _objectSpread({\n        mode: mode\n      }, fieldProps), /*#__PURE__*/React.createElement(\"span\", null, dom));\n    }\n\n    return dom;\n  }\n\n  if (mode === 'edit' || mode === 'update') {\n    var value = fieldProps.value;\n    var momentValue = parseValueToMoment(value, finalFormat);\n\n    var _dom2 = /*#__PURE__*/React.createElement(_TimePicker.RangePicker, _extends({\n      format: format,\n      bordered: plain === undefined ? true : !plain\n    }, fieldProps, {\n      value: momentValue\n    }));\n\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: mode\n      }, fieldProps), _dom2);\n    }\n\n    return _dom2;\n  }\n\n  return null;\n};\n\nexport { FieldTimeRangePicker };\nexport default /*#__PURE__*/React.forwardRef(FieldTimePicker);"]},"metadata":{},"sourceType":"module"}