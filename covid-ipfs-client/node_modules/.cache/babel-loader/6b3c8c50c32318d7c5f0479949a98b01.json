{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"style\"];\nimport React from \"react\";\nimport { useRefFunction } from '@ant-design/pro-utils';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { sortData } from './index';\nexport function useDragSort(props) {\n  var _props$dataSource = props.dataSource,\n      dataSource = _props$dataSource === void 0 ? [] : _props$dataSource,\n      onDragSortEnd = props.onDragSortEnd,\n      dragSortKey = props.dragSortKey; // 拖拽排序相关逻辑\n\n  var SortableItem = SortableElement(function (p) {\n    return /*#__PURE__*/React.createElement(\"tr\", p);\n  });\n  var SortContainer = SortableContainer(function (p) {\n    return /*#__PURE__*/React.createElement(\"tbody\", p);\n  });\n  /* istanbul ignore next */\n\n  var handleSortEnd = useRefFunction(function (params) {\n    /* istanbul ignore next */\n    var newDataSource = sortData(params, dataSource);\n    /* istanbul ignore next */\n\n    if (newDataSource && onDragSortEnd) {\n      /* istanbul ignore next */\n      onDragSortEnd(newDataSource);\n    }\n  });\n  var DraggableContainer = useRefFunction(function (p) {\n    return /*#__PURE__*/React.createElement(SortContainer, _extends({\n      useDragHandle: true,\n      disableAutoscroll: true,\n      helperClass: \"row-dragging\",\n      onSortEnd: handleSortEnd\n    }, p));\n  });\n  var DraggableBodyRow = useRefFunction(function (p) {\n    var DraggableBodyRowClassName = p.className,\n        DraggableBodyRowStyle = p.style,\n        restProps = _objectWithoutProperties(p, _excluded); // function findIndex base on Table rowKey props and should always be a right array index\n\n\n    var index = dataSource.findIndex(function (item) {\n      var _props$rowKey;\n\n      return item[(_props$rowKey = props.rowKey) !== null && _props$rowKey !== void 0 ? _props$rowKey : 'index'] === restProps['data-row-key'];\n    });\n    return /*#__PURE__*/React.createElement(SortableItem, _extends({\n      index: index\n    }, restProps));\n  });\n  var components = props.components || {};\n\n  if (dragSortKey) {\n    var _props$components;\n\n    components.body = _objectSpread(_objectSpread({}, ((_props$components = props.components) === null || _props$components === void 0 ? void 0 : _props$components.body) || {}), {}, {\n      wrapper: DraggableContainer,\n      row: DraggableBodyRow\n    });\n  }\n\n  return {\n    components: components\n  };\n}","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-table/es/utils/useDragSort.js"],"names":["_objectSpread","_objectWithoutProperties","_extends","_excluded","React","useRefFunction","SortableContainer","SortableElement","sortData","useDragSort","props","_props$dataSource","dataSource","onDragSortEnd","dragSortKey","SortableItem","p","createElement","SortContainer","handleSortEnd","params","newDataSource","DraggableContainer","useDragHandle","disableAutoscroll","helperClass","onSortEnd","DraggableBodyRow","DraggableBodyRowClassName","className","DraggableBodyRowStyle","style","restProps","index","findIndex","item","_props$rowKey","rowKey","components","_props$components","body","wrapper","row"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"style\"];\nimport React from \"react\";\nimport { useRefFunction } from '@ant-design/pro-utils';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { sortData } from './index';\nexport function useDragSort(props) {\n  var _props$dataSource = props.dataSource,\n      dataSource = _props$dataSource === void 0 ? [] : _props$dataSource,\n      onDragSortEnd = props.onDragSortEnd,\n      dragSortKey = props.dragSortKey; // 拖拽排序相关逻辑\n\n  var SortableItem = SortableElement(function (p) {\n    return /*#__PURE__*/React.createElement(\"tr\", p);\n  });\n  var SortContainer = SortableContainer(function (p) {\n    return /*#__PURE__*/React.createElement(\"tbody\", p);\n  });\n  /* istanbul ignore next */\n\n  var handleSortEnd = useRefFunction(function (params) {\n    /* istanbul ignore next */\n    var newDataSource = sortData(params, dataSource);\n    /* istanbul ignore next */\n\n    if (newDataSource && onDragSortEnd) {\n      /* istanbul ignore next */\n      onDragSortEnd(newDataSource);\n    }\n  });\n  var DraggableContainer = useRefFunction(function (p) {\n    return /*#__PURE__*/React.createElement(SortContainer, _extends({\n      useDragHandle: true,\n      disableAutoscroll: true,\n      helperClass: \"row-dragging\",\n      onSortEnd: handleSortEnd\n    }, p));\n  });\n  var DraggableBodyRow = useRefFunction(function (p) {\n    var DraggableBodyRowClassName = p.className,\n        DraggableBodyRowStyle = p.style,\n        restProps = _objectWithoutProperties(p, _excluded); // function findIndex base on Table rowKey props and should always be a right array index\n\n\n    var index = dataSource.findIndex(function (item) {\n      var _props$rowKey;\n\n      return item[(_props$rowKey = props.rowKey) !== null && _props$rowKey !== void 0 ? _props$rowKey : 'index'] === restProps['data-row-key'];\n    });\n    return /*#__PURE__*/React.createElement(SortableItem, _extends({\n      index: index\n    }, restProps));\n  });\n  var components = props.components || {};\n\n  if (dragSortKey) {\n    var _props$components;\n\n    components.body = _objectSpread(_objectSpread({}, ((_props$components = props.components) === null || _props$components === void 0 ? void 0 : _props$components.body) || {}), {}, {\n      wrapper: DraggableContainer,\n      row: DraggableBodyRow\n    });\n  }\n\n  return {\n    components: components\n  };\n}"]},"metadata":{},"sourceType":"module"}