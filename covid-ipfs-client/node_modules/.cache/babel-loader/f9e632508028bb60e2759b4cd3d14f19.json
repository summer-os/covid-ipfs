{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nvar _excluded = [\"optionItemRender\", \"mode\", \"onSearch\", \"onFocus\", \"onChange\", \"autoClearSearchValue\", \"searchOnFocus\", \"resetAfterSelect\", \"fetchDataOnSearch\", \"optionFilterProp\", \"optionLabelProp\", \"className\", \"disabled\", \"options\", \"fetchData\", \"resetData\", \"prefixCls\", \"onClear\", \"searchValue\", \"showSearch\", \"fieldNames\"];\nimport classNames from 'classnames';\nimport React, { useContext, useEffect, useImperativeHandle, useRef, useState } from 'react';\nvar Option = _Select.Option,\n    OptGroup = _Select.OptGroup;\n\nvar SearchSelect = function SearchSelect(props, ref) {\n  var optionItemRender = props.optionItemRender,\n      mode = props.mode,\n      onSearch = props.onSearch,\n      _onFocus = props.onFocus,\n      _onChange = props.onChange,\n      autoClearSearchValue = props.autoClearSearchValue,\n      _props$searchOnFocus = props.searchOnFocus,\n      searchOnFocus = _props$searchOnFocus === void 0 ? false : _props$searchOnFocus,\n      _props$resetAfterSele = props.resetAfterSelect,\n      resetAfterSelect = _props$resetAfterSele === void 0 ? false : _props$resetAfterSele,\n      _props$fetchDataOnSea = props.fetchDataOnSearch,\n      fetchDataOnSearch = _props$fetchDataOnSea === void 0 ? true : _props$fetchDataOnSea,\n      _props$optionFilterPr = props.optionFilterProp,\n      optionFilterProp = _props$optionFilterPr === void 0 ? 'label' : _props$optionFilterPr,\n      _props$optionLabelPro = props.optionLabelProp,\n      optionLabelProp = _props$optionLabelPro === void 0 ? 'label' : _props$optionLabelPro,\n      className = props.className,\n      disabled = props.disabled,\n      options = props.options,\n      fetchData = props.fetchData,\n      resetData = props.resetData,\n      customizePrefixCls = props.prefixCls,\n      _onClear = props.onClear,\n      propsSearchValue = props.searchValue,\n      showSearch = props.showSearch,\n      fieldNames = props.fieldNames,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _ref = fieldNames || {},\n      _ref$label = _ref.label,\n      labelPropsName = _ref$label === void 0 ? 'label' : _ref$label,\n      _ref$value = _ref.value,\n      valuePropsName = _ref$value === void 0 ? 'value' : _ref$value,\n      _ref$options = _ref.options,\n      optionsPropsName = _ref$options === void 0 ? 'options' : _ref$options;\n\n  var _useState = useState(propsSearchValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var selectRef = useRef();\n  useImperativeHandle(ref, function () {\n    return selectRef.current;\n  });\n  useEffect(function () {\n    if (restProps.autoFocus) {\n      var _selectRef$current;\n\n      selectRef === null || selectRef === void 0 ? void 0 : (_selectRef$current = selectRef.current) === null || _selectRef$current === void 0 ? void 0 : _selectRef$current.focus();\n    }\n  }, [restProps.autoFocus]);\n  useEffect(function () {\n    setSearchValue(propsSearchValue);\n  }, [propsSearchValue]);\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-filed-search-select', customizePrefixCls); // 兼容 renderXXX API。\n\n  var classString = classNames(prefixCls, className, _defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled));\n\n  var getMergeValue = function getMergeValue(value, option) {\n    if (Array.isArray(value) && value.length > 0) {\n      // 多选情况且用户有选择\n      return value.map(function (item, index) {\n        var optionItem = option === null || option === void 0 ? void 0 : option[index];\n        var dataItem = (optionItem === null || optionItem === void 0 ? void 0 : optionItem['data-item']) || {};\n        return _objectSpread(_objectSpread({}, dataItem), item);\n      });\n    }\n\n    return [];\n  };\n\n  var renderOptions = function renderOptions(mapOptions) {\n    return mapOptions.map(function (item) {\n      var _item$optionsPropsNam;\n\n      var itemDisable = item.disabled,\n          itemClassName = item.className,\n          optionType = item.optionType;\n      var label = item[labelPropsName];\n      var value = item[valuePropsName];\n      var itemOptions = (_item$optionsPropsNam = item[optionsPropsName]) !== null && _item$optionsPropsNam !== void 0 ? _item$optionsPropsNam : [];\n\n      if (optionType === 'optGroup' || item.options) {\n        return /*#__PURE__*/React.createElement(OptGroup, {\n          key: value,\n          label: label\n        }, renderOptions(itemOptions));\n      }\n\n      return /*#__PURE__*/React.createElement(Option, _extends({}, item, {\n        value: value,\n        key: value || (label === null || label === void 0 ? void 0 : label.toString()),\n        disabled: itemDisable,\n        \"data-item\": item,\n        className: \"\".concat(prefixCls, \"-option \").concat(itemClassName || ''),\n        label: label\n      }), (optionItemRender === null || optionItemRender === void 0 ? void 0 : optionItemRender(item)) || label);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(_Select, _extends({\n    ref: selectRef,\n    className: classString,\n    allowClear: true,\n    autoClearSearchValue: autoClearSearchValue,\n    disabled: disabled,\n    mode: mode,\n    showSearch: showSearch,\n    searchValue: searchValue,\n    optionFilterProp: optionFilterProp,\n    optionLabelProp: optionLabelProp,\n    onClear: function onClear() {\n      _onClear === null || _onClear === void 0 ? void 0 : _onClear();\n      fetchData('');\n\n      if (showSearch) {\n        setSearchValue('');\n      }\n    }\n  }, restProps, {\n    onSearch: showSearch ? function (value) {\n      if (fetchDataOnSearch) {\n        fetchData(value);\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value);\n      setSearchValue(value);\n    } : undefined,\n    onChange: function onChange(value, optionList) {\n      // 将搜索框置空 和 antd 行为保持一致\n      if (showSearch && autoClearSearchValue) {\n        fetchData('');\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch('');\n        setSearchValue('');\n      }\n\n      for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        rest[_key - 2] = arguments[_key];\n      }\n\n      if (!props.labelInValue) {\n        _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [value, optionList].concat(rest));\n        return;\n      }\n\n      if (mode !== 'multiple') {\n        // 单选情况且用户选择了选项\n        var dataItem = optionList && optionList['data-item'] || {};\n        _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [_objectSpread(_objectSpread({}, value), dataItem), optionList].concat(rest));\n        return;\n      } // 合并值\n\n\n      var mergeValue = getMergeValue(value, optionList);\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [mergeValue, optionList].concat(rest)); // 将搜索结果置空，重新搜索\n\n      if (resetAfterSelect) resetData();\n    },\n    onFocus: function onFocus(e) {\n      if (searchOnFocus) {\n        fetchData('');\n      }\n\n      _onFocus === null || _onFocus === void 0 ? void 0 : _onFocus(e);\n    }\n  }), renderOptions(options || []));\n};\n\nexport default /*#__PURE__*/React.forwardRef(SearchSelect);","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-field/es/components/Select/SearchSelect/index.js"],"names":["_extends","_objectSpread","_defineProperty","_ConfigProvider","_slicedToArray","_objectWithoutProperties","_Select","_excluded","classNames","React","useContext","useEffect","useImperativeHandle","useRef","useState","Option","OptGroup","SearchSelect","props","ref","optionItemRender","mode","onSearch","_onFocus","onFocus","_onChange","onChange","autoClearSearchValue","_props$searchOnFocus","searchOnFocus","_props$resetAfterSele","resetAfterSelect","_props$fetchDataOnSea","fetchDataOnSearch","_props$optionFilterPr","optionFilterProp","_props$optionLabelPro","optionLabelProp","className","disabled","options","fetchData","resetData","customizePrefixCls","prefixCls","_onClear","onClear","propsSearchValue","searchValue","showSearch","fieldNames","restProps","_ref","_ref$label","label","labelPropsName","_ref$value","value","valuePropsName","_ref$options","optionsPropsName","_useState","_useState2","setSearchValue","selectRef","current","autoFocus","_selectRef$current","focus","_useContext","ConfigContext","getPrefixCls","classString","concat","getMergeValue","option","Array","isArray","length","map","item","index","optionItem","dataItem","renderOptions","mapOptions","_item$optionsPropsNam","itemDisable","itemClassName","optionType","itemOptions","createElement","key","toString","allowClear","undefined","optionList","_len","arguments","rest","_key","labelInValue","apply","mergeValue","e","forwardRef"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nvar _excluded = [\"optionItemRender\", \"mode\", \"onSearch\", \"onFocus\", \"onChange\", \"autoClearSearchValue\", \"searchOnFocus\", \"resetAfterSelect\", \"fetchDataOnSearch\", \"optionFilterProp\", \"optionLabelProp\", \"className\", \"disabled\", \"options\", \"fetchData\", \"resetData\", \"prefixCls\", \"onClear\", \"searchValue\", \"showSearch\", \"fieldNames\"];\nimport classNames from 'classnames';\nimport React, { useContext, useEffect, useImperativeHandle, useRef, useState } from 'react';\nvar Option = _Select.Option,\n    OptGroup = _Select.OptGroup;\n\nvar SearchSelect = function SearchSelect(props, ref) {\n  var optionItemRender = props.optionItemRender,\n      mode = props.mode,\n      onSearch = props.onSearch,\n      _onFocus = props.onFocus,\n      _onChange = props.onChange,\n      autoClearSearchValue = props.autoClearSearchValue,\n      _props$searchOnFocus = props.searchOnFocus,\n      searchOnFocus = _props$searchOnFocus === void 0 ? false : _props$searchOnFocus,\n      _props$resetAfterSele = props.resetAfterSelect,\n      resetAfterSelect = _props$resetAfterSele === void 0 ? false : _props$resetAfterSele,\n      _props$fetchDataOnSea = props.fetchDataOnSearch,\n      fetchDataOnSearch = _props$fetchDataOnSea === void 0 ? true : _props$fetchDataOnSea,\n      _props$optionFilterPr = props.optionFilterProp,\n      optionFilterProp = _props$optionFilterPr === void 0 ? 'label' : _props$optionFilterPr,\n      _props$optionLabelPro = props.optionLabelProp,\n      optionLabelProp = _props$optionLabelPro === void 0 ? 'label' : _props$optionLabelPro,\n      className = props.className,\n      disabled = props.disabled,\n      options = props.options,\n      fetchData = props.fetchData,\n      resetData = props.resetData,\n      customizePrefixCls = props.prefixCls,\n      _onClear = props.onClear,\n      propsSearchValue = props.searchValue,\n      showSearch = props.showSearch,\n      fieldNames = props.fieldNames,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _ref = fieldNames || {},\n      _ref$label = _ref.label,\n      labelPropsName = _ref$label === void 0 ? 'label' : _ref$label,\n      _ref$value = _ref.value,\n      valuePropsName = _ref$value === void 0 ? 'value' : _ref$value,\n      _ref$options = _ref.options,\n      optionsPropsName = _ref$options === void 0 ? 'options' : _ref$options;\n\n  var _useState = useState(propsSearchValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var selectRef = useRef();\n  useImperativeHandle(ref, function () {\n    return selectRef.current;\n  });\n  useEffect(function () {\n    if (restProps.autoFocus) {\n      var _selectRef$current;\n\n      selectRef === null || selectRef === void 0 ? void 0 : (_selectRef$current = selectRef.current) === null || _selectRef$current === void 0 ? void 0 : _selectRef$current.focus();\n    }\n  }, [restProps.autoFocus]);\n  useEffect(function () {\n    setSearchValue(propsSearchValue);\n  }, [propsSearchValue]);\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-filed-search-select', customizePrefixCls); // 兼容 renderXXX API。\n\n  var classString = classNames(prefixCls, className, _defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled));\n\n  var getMergeValue = function getMergeValue(value, option) {\n    if (Array.isArray(value) && value.length > 0) {\n      // 多选情况且用户有选择\n      return value.map(function (item, index) {\n        var optionItem = option === null || option === void 0 ? void 0 : option[index];\n        var dataItem = (optionItem === null || optionItem === void 0 ? void 0 : optionItem['data-item']) || {};\n        return _objectSpread(_objectSpread({}, dataItem), item);\n      });\n    }\n\n    return [];\n  };\n\n  var renderOptions = function renderOptions(mapOptions) {\n    return mapOptions.map(function (item) {\n      var _item$optionsPropsNam;\n\n      var itemDisable = item.disabled,\n          itemClassName = item.className,\n          optionType = item.optionType;\n      var label = item[labelPropsName];\n      var value = item[valuePropsName];\n      var itemOptions = (_item$optionsPropsNam = item[optionsPropsName]) !== null && _item$optionsPropsNam !== void 0 ? _item$optionsPropsNam : [];\n\n      if (optionType === 'optGroup' || item.options) {\n        return /*#__PURE__*/React.createElement(OptGroup, {\n          key: value,\n          label: label\n        }, renderOptions(itemOptions));\n      }\n\n      return /*#__PURE__*/React.createElement(Option, _extends({}, item, {\n        value: value,\n        key: value || (label === null || label === void 0 ? void 0 : label.toString()),\n        disabled: itemDisable,\n        \"data-item\": item,\n        className: \"\".concat(prefixCls, \"-option \").concat(itemClassName || ''),\n        label: label\n      }), (optionItemRender === null || optionItemRender === void 0 ? void 0 : optionItemRender(item)) || label);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(_Select, _extends({\n    ref: selectRef,\n    className: classString,\n    allowClear: true,\n    autoClearSearchValue: autoClearSearchValue,\n    disabled: disabled,\n    mode: mode,\n    showSearch: showSearch,\n    searchValue: searchValue,\n    optionFilterProp: optionFilterProp,\n    optionLabelProp: optionLabelProp,\n    onClear: function onClear() {\n      _onClear === null || _onClear === void 0 ? void 0 : _onClear();\n      fetchData('');\n\n      if (showSearch) {\n        setSearchValue('');\n      }\n    }\n  }, restProps, {\n    onSearch: showSearch ? function (value) {\n      if (fetchDataOnSearch) {\n        fetchData(value);\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value);\n      setSearchValue(value);\n    } : undefined,\n    onChange: function onChange(value, optionList) {\n      // 将搜索框置空 和 antd 行为保持一致\n      if (showSearch && autoClearSearchValue) {\n        fetchData('');\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch('');\n        setSearchValue('');\n      }\n\n      for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        rest[_key - 2] = arguments[_key];\n      }\n\n      if (!props.labelInValue) {\n        _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [value, optionList].concat(rest));\n        return;\n      }\n\n      if (mode !== 'multiple') {\n        // 单选情况且用户选择了选项\n        var dataItem = optionList && optionList['data-item'] || {};\n        _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [_objectSpread(_objectSpread({}, value), dataItem), optionList].concat(rest));\n        return;\n      } // 合并值\n\n\n      var mergeValue = getMergeValue(value, optionList);\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange.apply(void 0, [mergeValue, optionList].concat(rest)); // 将搜索结果置空，重新搜索\n\n      if (resetAfterSelect) resetData();\n    },\n    onFocus: function onFocus(e) {\n      if (searchOnFocus) {\n        fetchData('');\n      }\n\n      _onFocus === null || _onFocus === void 0 ? void 0 : _onFocus(e);\n    }\n  }), renderOptions(options || []));\n};\n\nexport default /*#__PURE__*/React.forwardRef(SearchSelect);"]},"metadata":{},"sourceType":"module"}