{"ast":null,"code":"import \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"label\", \"prefixCls\", \"onChange\", \"value\", \"mode\", \"children\", \"defaultValue\", \"size\", \"showSearch\", \"disabled\", \"style\", \"className\", \"bordered\", \"options\", \"onSearch\", \"allowClear\", \"labelInValue\", \"fieldNames\", \"lightLabel\", \"labelTrigger\"];\nimport { SearchOutlined } from '@ant-design/icons';\nimport { FieldLabel } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useContext, useMemo, useState } from 'react';\nimport './index.less';\n/**\n * 如果有 label 就优先使用 label\n *\n * @param valueMap\n * @param v\n */\n\nvar getValueOrLabel = function getValueOrLabel(valueMap, v) {\n  if (_typeof(v) !== 'object') {\n    return valueMap[v] || v;\n  }\n\n  return valueMap[v === null || v === void 0 ? void 0 : v.value] || v.label;\n};\n\nvar LightSelect = function LightSelect(props, ref) {\n  var label = props.label,\n      customizePrefixCls = props.prefixCls,\n      _onChange = props.onChange,\n      value = props.value,\n      mode = props.mode,\n      children = props.children,\n      defaultValue = props.defaultValue,\n      size = props.size,\n      showSearch = props.showSearch,\n      disabled = props.disabled,\n      style = props.style,\n      className = props.className,\n      bordered = props.bordered,\n      options = props.options,\n      onSearch = props.onSearch,\n      allowClear = props.allowClear,\n      labelInValue = props.labelInValue,\n      fieldNames = props.fieldNames,\n      lightLabel = props.lightLabel,\n      labelTrigger = props.labelTrigger,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _props$placeholder = props.placeholder,\n      placeholder = _props$placeholder === void 0 ? label : _props$placeholder;\n\n  var _ref = fieldNames || {},\n      _ref$label = _ref.label,\n      labelPropsName = _ref$label === void 0 ? 'label' : _ref$label,\n      _ref$value = _ref.value,\n      valuePropsName = _ref$value === void 0 ? 'value' : _ref$value;\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-field-select-light-select');\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      keyword = _useState4[0],\n      setKeyword = _useState4[1];\n\n  var valueMap = useMemo(function () {\n    var values = {};\n    options === null || options === void 0 ? void 0 : options.forEach(function (item) {\n      var optionLabel = item[labelPropsName];\n      var optionValue = item[valuePropsName];\n      values[optionValue] = optionLabel || optionValue;\n    });\n    return values;\n  }, [labelPropsName, options, valuePropsName]);\n  var filterValue = Array.isArray(value) ? value.map(function (v) {\n    return getValueOrLabel(valueMap, v);\n  }) : getValueOrLabel(valueMap, value);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-searchable\"), showSearch), className),\n    style: style,\n    onClick: function onClick(e) {\n      var _lightLabel$current, _lightLabel$current$l, _lightLabel$current$l2;\n\n      if (disabled) return; // 点击label切换下拉菜单\n\n      var isLabelClick = lightLabel === null || lightLabel === void 0 ? void 0 : (_lightLabel$current = lightLabel.current) === null || _lightLabel$current === void 0 ? void 0 : (_lightLabel$current$l = _lightLabel$current.labelRef) === null || _lightLabel$current$l === void 0 ? void 0 : (_lightLabel$current$l2 = _lightLabel$current$l.current) === null || _lightLabel$current$l2 === void 0 ? void 0 : _lightLabel$current$l2.contains(e.target);\n\n      if (isLabelClick) {\n        setOpen(!open);\n      } else {\n        setOpen(true);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(_Select, _extends({}, restProps, {\n    allowClear: allowClear,\n    value: value,\n    mode: mode,\n    labelInValue: labelInValue,\n    size: size,\n    disabled: disabled,\n    onChange: function onChange(v, option) {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(v, option);\n\n      if (mode !== 'multiple') {\n        setTimeout(function () {\n          setOpen(false);\n        }, 0);\n      }\n    },\n    bordered: bordered,\n    showSearch: showSearch,\n    onSearch: onSearch,\n    style: style,\n    dropdownRender: function dropdownRender(menuNode) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: ref\n      }, showSearch && /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: '4px 8px'\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        value: keyword,\n        allowClear: allowClear,\n        onChange: function onChange(e) {\n          setKeyword(e.target.value.toLowerCase());\n          onSearch === null || onSearch === void 0 ? void 0 : onSearch(e.target.value);\n        },\n        onKeyDown: function onKeyDown(e) {\n          // 避免按下删除键把选项也删除了\n          e.stopPropagation();\n        },\n        style: {\n          width: '100%'\n        },\n        prefix: /*#__PURE__*/React.createElement(SearchOutlined, null)\n      })), menuNode);\n    },\n    open: open,\n    onDropdownVisibleChange: function onDropdownVisibleChange(isOpen) {\n      if (!isOpen) {\n        setTimeout(function () {\n          setKeyword('');\n        }, 0);\n      }\n\n      if (!labelTrigger) {\n        setOpen(isOpen);\n      }\n    },\n    prefixCls: customizePrefixCls,\n    options: keyword ? options === null || options === void 0 ? void 0 : options.filter(function (o) {\n      var _String, _String$toLowerCase, _o$valuePropsName, _o$valuePropsName$toS, _o$valuePropsName$toS2;\n\n      return ((_String = String(o[labelPropsName])) === null || _String === void 0 ? void 0 : (_String$toLowerCase = _String.toLowerCase()) === null || _String$toLowerCase === void 0 ? void 0 : _String$toLowerCase.includes(keyword)) || ((_o$valuePropsName = o[valuePropsName]) === null || _o$valuePropsName === void 0 ? void 0 : (_o$valuePropsName$toS = _o$valuePropsName.toString()) === null || _o$valuePropsName$toS === void 0 ? void 0 : (_o$valuePropsName$toS2 = _o$valuePropsName$toS.toLowerCase()) === null || _o$valuePropsName$toS2 === void 0 ? void 0 : _o$valuePropsName$toS2.includes(keyword));\n    }) : options\n  })), /*#__PURE__*/React.createElement(FieldLabel, {\n    ellipsis: true,\n    size: size,\n    label: label,\n    placeholder: placeholder,\n    disabled: disabled,\n    expanded: open,\n    bordered: bordered,\n    allowClear: allowClear,\n    value: filterValue || (value === null || value === void 0 ? void 0 : value.label) || value,\n    onClear: function onClear() {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(undefined, undefined);\n    },\n    ref: lightLabel\n  }));\n};\n\nexport default /*#__PURE__*/React.forwardRef(LightSelect);","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-field/es/components/Select/LightSelect/index.js"],"names":["_Select","_extends","_Input","_defineProperty","_slicedToArray","_ConfigProvider","_objectWithoutProperties","_typeof","_excluded","SearchOutlined","FieldLabel","classNames","React","useContext","useMemo","useState","getValueOrLabel","valueMap","v","value","label","LightSelect","props","ref","customizePrefixCls","prefixCls","_onChange","onChange","mode","children","defaultValue","size","showSearch","disabled","style","className","bordered","options","onSearch","allowClear","labelInValue","fieldNames","lightLabel","labelTrigger","restProps","_props$placeholder","placeholder","_ref","_ref$label","labelPropsName","_ref$value","valuePropsName","_useContext","ConfigContext","getPrefixCls","_useState","_useState2","open","setOpen","_useState3","_useState4","keyword","setKeyword","values","forEach","item","optionLabel","optionValue","filterValue","Array","isArray","map","createElement","concat","onClick","e","_lightLabel$current","_lightLabel$current$l","_lightLabel$current$l2","isLabelClick","current","labelRef","contains","target","option","setTimeout","dropdownRender","menuNode","margin","toLowerCase","onKeyDown","stopPropagation","width","prefix","onDropdownVisibleChange","isOpen","filter","o","_String","_String$toLowerCase","_o$valuePropsName","_o$valuePropsName$toS","_o$valuePropsName$toS2","String","includes","toString","ellipsis","expanded","onClear","undefined","forwardRef"],"mappings":"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","sourcesContent":["import \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"label\", \"prefixCls\", \"onChange\", \"value\", \"mode\", \"children\", \"defaultValue\", \"size\", \"showSearch\", \"disabled\", \"style\", \"className\", \"bordered\", \"options\", \"onSearch\", \"allowClear\", \"labelInValue\", \"fieldNames\", \"lightLabel\", \"labelTrigger\"];\nimport { SearchOutlined } from '@ant-design/icons';\nimport { FieldLabel } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useContext, useMemo, useState } from 'react';\nimport './index.less';\n/**\n * 如果有 label 就优先使用 label\n *\n * @param valueMap\n * @param v\n */\n\nvar getValueOrLabel = function getValueOrLabel(valueMap, v) {\n  if (_typeof(v) !== 'object') {\n    return valueMap[v] || v;\n  }\n\n  return valueMap[v === null || v === void 0 ? void 0 : v.value] || v.label;\n};\n\nvar LightSelect = function LightSelect(props, ref) {\n  var label = props.label,\n      customizePrefixCls = props.prefixCls,\n      _onChange = props.onChange,\n      value = props.value,\n      mode = props.mode,\n      children = props.children,\n      defaultValue = props.defaultValue,\n      size = props.size,\n      showSearch = props.showSearch,\n      disabled = props.disabled,\n      style = props.style,\n      className = props.className,\n      bordered = props.bordered,\n      options = props.options,\n      onSearch = props.onSearch,\n      allowClear = props.allowClear,\n      labelInValue = props.labelInValue,\n      fieldNames = props.fieldNames,\n      lightLabel = props.lightLabel,\n      labelTrigger = props.labelTrigger,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _props$placeholder = props.placeholder,\n      placeholder = _props$placeholder === void 0 ? label : _props$placeholder;\n\n  var _ref = fieldNames || {},\n      _ref$label = _ref.label,\n      labelPropsName = _ref$label === void 0 ? 'label' : _ref$label,\n      _ref$value = _ref.value,\n      valuePropsName = _ref$value === void 0 ? 'value' : _ref$value;\n\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('pro-field-select-light-select');\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      keyword = _useState4[0],\n      setKeyword = _useState4[1];\n\n  var valueMap = useMemo(function () {\n    var values = {};\n    options === null || options === void 0 ? void 0 : options.forEach(function (item) {\n      var optionLabel = item[labelPropsName];\n      var optionValue = item[valuePropsName];\n      values[optionValue] = optionLabel || optionValue;\n    });\n    return values;\n  }, [labelPropsName, options, valuePropsName]);\n  var filterValue = Array.isArray(value) ? value.map(function (v) {\n    return getValueOrLabel(valueMap, v);\n  }) : getValueOrLabel(valueMap, value);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-searchable\"), showSearch), className),\n    style: style,\n    onClick: function onClick(e) {\n      var _lightLabel$current, _lightLabel$current$l, _lightLabel$current$l2;\n\n      if (disabled) return; // 点击label切换下拉菜单\n\n      var isLabelClick = lightLabel === null || lightLabel === void 0 ? void 0 : (_lightLabel$current = lightLabel.current) === null || _lightLabel$current === void 0 ? void 0 : (_lightLabel$current$l = _lightLabel$current.labelRef) === null || _lightLabel$current$l === void 0 ? void 0 : (_lightLabel$current$l2 = _lightLabel$current$l.current) === null || _lightLabel$current$l2 === void 0 ? void 0 : _lightLabel$current$l2.contains(e.target);\n\n      if (isLabelClick) {\n        setOpen(!open);\n      } else {\n        setOpen(true);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(_Select, _extends({}, restProps, {\n    allowClear: allowClear,\n    value: value,\n    mode: mode,\n    labelInValue: labelInValue,\n    size: size,\n    disabled: disabled,\n    onChange: function onChange(v, option) {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(v, option);\n\n      if (mode !== 'multiple') {\n        setTimeout(function () {\n          setOpen(false);\n        }, 0);\n      }\n    },\n    bordered: bordered,\n    showSearch: showSearch,\n    onSearch: onSearch,\n    style: style,\n    dropdownRender: function dropdownRender(menuNode) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: ref\n      }, showSearch && /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: '4px 8px'\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        value: keyword,\n        allowClear: allowClear,\n        onChange: function onChange(e) {\n          setKeyword(e.target.value.toLowerCase());\n          onSearch === null || onSearch === void 0 ? void 0 : onSearch(e.target.value);\n        },\n        onKeyDown: function onKeyDown(e) {\n          // 避免按下删除键把选项也删除了\n          e.stopPropagation();\n        },\n        style: {\n          width: '100%'\n        },\n        prefix: /*#__PURE__*/React.createElement(SearchOutlined, null)\n      })), menuNode);\n    },\n    open: open,\n    onDropdownVisibleChange: function onDropdownVisibleChange(isOpen) {\n      if (!isOpen) {\n        setTimeout(function () {\n          setKeyword('');\n        }, 0);\n      }\n\n      if (!labelTrigger) {\n        setOpen(isOpen);\n      }\n    },\n    prefixCls: customizePrefixCls,\n    options: keyword ? options === null || options === void 0 ? void 0 : options.filter(function (o) {\n      var _String, _String$toLowerCase, _o$valuePropsName, _o$valuePropsName$toS, _o$valuePropsName$toS2;\n\n      return ((_String = String(o[labelPropsName])) === null || _String === void 0 ? void 0 : (_String$toLowerCase = _String.toLowerCase()) === null || _String$toLowerCase === void 0 ? void 0 : _String$toLowerCase.includes(keyword)) || ((_o$valuePropsName = o[valuePropsName]) === null || _o$valuePropsName === void 0 ? void 0 : (_o$valuePropsName$toS = _o$valuePropsName.toString()) === null || _o$valuePropsName$toS === void 0 ? void 0 : (_o$valuePropsName$toS2 = _o$valuePropsName$toS.toLowerCase()) === null || _o$valuePropsName$toS2 === void 0 ? void 0 : _o$valuePropsName$toS2.includes(keyword));\n    }) : options\n  })), /*#__PURE__*/React.createElement(FieldLabel, {\n    ellipsis: true,\n    size: size,\n    label: label,\n    placeholder: placeholder,\n    disabled: disabled,\n    expanded: open,\n    bordered: bordered,\n    allowClear: allowClear,\n    value: filterValue || (value === null || value === void 0 ? void 0 : value.label) || value,\n    onClear: function onClear() {\n      _onChange === null || _onChange === void 0 ? void 0 : _onChange(undefined, undefined);\n    },\n    ref: lightLabel\n  }));\n};\n\nexport default /*#__PURE__*/React.forwardRef(LightSelect);"]},"metadata":{},"sourceType":"module"}