{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/descriptions/style\";\nimport _Descriptions from \"antd/es/descriptions\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"valueEnum\", \"render\", \"renderText\", \"mode\", \"plain\", \"dataIndex\", \"request\", \"params\", \"editable\"],\n    _excluded2 = [\"request\", \"columns\", \"params\", \"dataSource\", \"onDataSourceChange\", \"formProps\", \"editable\", \"loading\", \"onLoadingChange\", \"actionRef\", \"onRequestError\"];\nimport { CheckOutlined, CloseOutlined, EditOutlined } from '@ant-design/icons';\nimport ProForm, { ProFormField } from '@ant-design/pro-form';\nimport ProSkeleton from '@ant-design/pro-skeleton';\nimport { ErrorBoundary, genCopyable, getFieldPropsOrFormItemProps, InlineErrorFormItem, LabelIconTip, useEditableMap } from '@ant-design/pro-utils';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport get from \"rc-util/es/utils/get\";\nimport React, { useContext, useEffect } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport './index.less';\nimport useFetchData from './useFetchData';\n/**\n * 根据 dataIndex 获取值，支持 dataIndex 为数组\n *\n * @param item\n * @param entity\n */\n\nvar getDataFromConfig = function getDataFromConfig(item, entity) {\n  var dataIndex = item.dataIndex;\n\n  if (dataIndex) {\n    var data = Array.isArray(dataIndex) ? get(entity, dataIndex) : entity[dataIndex];\n\n    if (data !== undefined || data !== null) {\n      return data;\n    }\n  }\n\n  return item.children;\n};\n/**\n * 这里会处理编辑的功能\n *\n * @param props\n */\n\n\nexport var FieldRender = function FieldRender(props) {\n  var valueEnum = props.valueEnum,\n      action = props.action,\n      index = props.index,\n      text = props.text,\n      entity = props.entity,\n      mode = props.mode,\n      render = props.render,\n      editableUtils = props.editableUtils,\n      valueType = props.valueType,\n      plain = props.plain,\n      dataIndex = props.dataIndex,\n      request = props.request,\n      renderFormItem = props.renderFormItem,\n      params = props.params;\n  var fieldConfig = {\n    text: text,\n    valueEnum: valueEnum,\n    mode: mode || 'read',\n    proFieldProps: {\n      render: render ? function () {\n        return render === null || render === void 0 ? void 0 : render(text, entity, index, action, _objectSpread(_objectSpread({}, props), {}, {\n          type: 'descriptions'\n        }));\n      } : undefined\n    },\n    ignoreFormItem: true,\n    valueType: valueType,\n    request: request,\n    params: params,\n    plain: plain\n  };\n  /** 如果是只读模式，fieldProps 的 form是空的，所以需要兜底处理 */\n\n  if (mode === 'read' || !mode || valueType === 'option') {\n    var fieldProps = getFieldPropsOrFormItemProps(props.fieldProps, undefined, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: false\n    }));\n    return /*#__PURE__*/React.createElement(ProFormField, _extends({\n      name: dataIndex\n    }, fieldConfig, {\n      fieldProps: fieldProps\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: -5,\n      marginBottom: -5,\n      marginLeft: 0,\n      marginRight: 0\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(pre, next) {\n      return pre !== next;\n    }\n  }, function (form) {\n    var _editableUtils$action;\n\n    var formItemProps = getFieldPropsOrFormItemProps(props.formItemProps, form, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: true\n    }));\n    var fieldProps = getFieldPropsOrFormItemProps(props.fieldProps, form, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: true\n    }));\n    var dom = renderFormItem ? renderFormItem === null || renderFormItem === void 0 ? void 0 : renderFormItem(_objectSpread(_objectSpread({}, props), {}, {\n      type: 'descriptions'\n    }), {\n      isEditable: true,\n      recordKey: dataIndex,\n      record: form.getFieldValue([dataIndex].flat(1)),\n      defaultRender: function defaultRender() {\n        return /*#__PURE__*/React.createElement(ProFormField, _extends({}, fieldConfig, {\n          fieldProps: fieldProps\n        }));\n      },\n      type: 'descriptions'\n    }, form) : undefined;\n    return /*#__PURE__*/React.createElement(_Space, null, /*#__PURE__*/React.createElement(InlineErrorFormItem, _extends({\n      name: dataIndex\n    }, formItemProps, {\n      style: _objectSpread({\n        margin: 0\n      }, (formItemProps === null || formItemProps === void 0 ? void 0 : formItemProps.style) || {}),\n      initialValue: text || (formItemProps === null || formItemProps === void 0 ? void 0 : formItemProps.initialValue)\n    }), dom || /*#__PURE__*/React.createElement(ProFormField, _extends({}, fieldConfig, {\n      // @ts-ignore\n      proFieldProps: _objectSpread({}, fieldConfig.proFieldProps),\n      fieldProps: fieldProps\n    }))), editableUtils === null || editableUtils === void 0 ? void 0 : (_editableUtils$action = editableUtils.actionRender) === null || _editableUtils$action === void 0 ? void 0 : _editableUtils$action.call(editableUtils, dataIndex || index, form, {\n      cancelText: /*#__PURE__*/React.createElement(CloseOutlined, null),\n      saveText: /*#__PURE__*/React.createElement(CheckOutlined, null),\n      deleteText: false\n    }));\n  }));\n};\n\nvar schemaToDescriptionsItem = function schemaToDescriptionsItem(items, entity, action, editableUtils) {\n  var _items$map;\n\n  var options = []; // 因为 Descriptions 只是个语法糖，children 是不会执行的，所以需要这里处理一下\n\n  var children = items === null || items === void 0 ? void 0 : (_items$map = items.map) === null || _items$map === void 0 ? void 0 : _items$map.call(items, function (item, index) {\n    var _getDataFromConfig, _restItem$label;\n\n    if ( /*#__PURE__*/React.isValidElement(item)) {\n      return item;\n    }\n\n    var valueEnum = item.valueEnum,\n        render = item.render,\n        renderText = item.renderText,\n        mode = item.mode,\n        plain = item.plain,\n        dataIndex = item.dataIndex,\n        request = item.request,\n        params = item.params,\n        editable = item.editable,\n        restItem = _objectWithoutProperties(item, _excluded);\n\n    var defaultData = (_getDataFromConfig = getDataFromConfig(item, entity)) !== null && _getDataFromConfig !== void 0 ? _getDataFromConfig : restItem.children;\n    var text = renderText ? renderText(defaultData, entity, index, action) : defaultData;\n    var title = typeof restItem.title === 'function' ? restItem.title(item, 'descriptions', null) : restItem.title; //  dataIndex 无所谓是否存在\n    // 有些时候不需要 dataIndex 可以直接 render\n\n    var valueType = typeof restItem.valueType === 'function' ? restItem.valueType(entity || {}, 'descriptions') : restItem.valueType;\n    var isEditable = editableUtils === null || editableUtils === void 0 ? void 0 : editableUtils.isEditable(dataIndex || index);\n    var fieldMode = mode || isEditable ? 'edit' : 'read';\n    var showEditIcon = editableUtils && fieldMode === 'read' && editable !== false && (editable === null || editable === void 0 ? void 0 : editable(text, entity, index)) !== false;\n    var Component = showEditIcon ? _Space : React.Fragment;\n    var contentDom = fieldMode === 'edit' ? text : genCopyable(text, item, text);\n    var field = /*#__PURE__*/React.createElement(_Descriptions.Item, _extends({}, restItem, {\n      key: restItem.key || ((_restItem$label = restItem.label) === null || _restItem$label === void 0 ? void 0 : _restItem$label.toString()) || index,\n      label: (title || restItem.label || restItem.tooltip || restItem.tip) && /*#__PURE__*/React.createElement(LabelIconTip, {\n        label: title || restItem.label,\n        tooltip: restItem.tooltip || restItem.tip,\n        ellipsis: item.ellipsis\n      })\n    }), /*#__PURE__*/React.createElement(Component, null, /*#__PURE__*/React.createElement(FieldRender, _extends({}, item, {\n      dataIndex: item.dataIndex || index,\n      mode: fieldMode,\n      text: contentDom,\n      valueType: valueType,\n      entity: entity,\n      index: index,\n      action: action,\n      editableUtils: editableUtils\n    })), showEditIcon && valueType !== 'option' && /*#__PURE__*/React.createElement(EditOutlined, {\n      onClick: function onClick() {\n        editableUtils === null || editableUtils === void 0 ? void 0 : editableUtils.startEditable(dataIndex || index);\n      }\n    }))); // 如果类型是 option 自动放到右上角\n\n    if (valueType === 'option') {\n      options.push(field);\n      return null;\n    }\n\n    return field;\n  }).filter(function (item) {\n    return item;\n  });\n  return {\n    // 空数组传递还是会被判定为有值\n    options: (options === null || options === void 0 ? void 0 : options.length) ? options : null,\n    children: children\n  };\n};\n\nvar ProDescriptionsItem = function ProDescriptionsItem(props) {\n  return /*#__PURE__*/React.createElement(_Descriptions.Item, props, props.children);\n};\n\nvar DefaultProDescriptionsDom = function DefaultProDescriptionsDom(dom) {\n  return dom.children;\n};\n\nvar ProDescriptions = function ProDescriptions(props) {\n  var _props$editable;\n\n  var request = props.request,\n      columns = props.columns,\n      _props$params = props.params,\n      params = _props$params === void 0 ? {} : _props$params,\n      dataSource = props.dataSource,\n      onDataSourceChange = props.onDataSourceChange,\n      formProps = props.formProps,\n      editable = props.editable,\n      loading = props.loading,\n      onLoadingChange = props.onLoadingChange,\n      actionRef = props.actionRef,\n      onRequestError = props.onRequestError,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var action = useFetchData( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!request) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return request(params);\n\n          case 3:\n            _context.t0 = _context.sent;\n            _context.next = 7;\n            break;\n\n          case 6:\n            _context.t0 = {\n              data: {}\n            };\n\n          case 7:\n            data = _context.t0;\n            return _context.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), {\n    onRequestError: onRequestError,\n    effects: [stringify(params)],\n    manual: !request,\n    dataSource: dataSource,\n    loading: loading,\n    onLoadingChange: onLoadingChange,\n    onDataSourceChange: onDataSourceChange\n  });\n  /*\n   * 可编辑行的相关配置\n   */\n\n  var editableUtils = useEditableMap(_objectSpread(_objectSpread({}, props.editable), {}, {\n    childrenColumnName: undefined,\n    dataSource: action.dataSource,\n    setDataSource: action.setDataSource\n  }));\n  /** 支持 reload 的功能 */\n\n  useEffect(function () {\n    if (actionRef) {\n      actionRef.current = _objectSpread({\n        reload: action.reload\n      }, editableUtils);\n    }\n  }, [action, actionRef, editableUtils]); // loading 时展示\n  // loading =  undefined 但是 request 存在时也应该展示\n\n  if (action.loading || action.loading === undefined && request) {\n    return /*#__PURE__*/React.createElement(ProSkeleton, {\n      type: \"descriptions\",\n      list: false,\n      pageHeader: false\n    });\n  }\n\n  var getColumns = function getColumns() {\n    // 因为 Descriptions 只是个语法糖，children 是不会执行的，所以需要这里处理一下\n    var childrenColumns = toArray(props.children).filter(Boolean).map(function (item) {\n      if (! /*#__PURE__*/React.isValidElement(item)) {\n        return item;\n      }\n\n      var _item$props = item === null || item === void 0 ? void 0 : item.props,\n          valueEnum = _item$props.valueEnum,\n          valueType = _item$props.valueType,\n          dataIndex = _item$props.dataIndex,\n          ellipsis = _item$props.ellipsis,\n          copyable = _item$props.copyable,\n          itemRequest = _item$props.request;\n\n      if (!valueType && !valueEnum && !dataIndex && !itemRequest && !ellipsis && !copyable) {\n        return item;\n      }\n\n      return _objectSpread(_objectSpread({}, item === null || item === void 0 ? void 0 : item.props), {}, {\n        entity: dataSource\n      });\n    });\n    return [].concat(_toConsumableArray(columns || []), _toConsumableArray(childrenColumns)).filter(function (item) {\n      if (!item) return false;\n\n      if ((item === null || item === void 0 ? void 0 : item.valueType) && ['index', 'indexBorder'].includes(item === null || item === void 0 ? void 0 : item.valueType)) {\n        return false;\n      }\n\n      return !(item === null || item === void 0 ? void 0 : item.hideInDescriptions);\n    }).sort(function (a, b) {\n      if (b.order || a.order) {\n        return (b.order || 0) - (a.order || 0);\n      }\n\n      return (b.index || 0) - (a.index || 0);\n    });\n  };\n\n  var _schemaToDescriptions = schemaToDescriptionsItem(getColumns(), action.dataSource || {}, (actionRef === null || actionRef === void 0 ? void 0 : actionRef.current) || action, editable ? editableUtils : undefined),\n      options = _schemaToDescriptions.options,\n      children = _schemaToDescriptions.children;\n  /** 如果不是可编辑模式，没必要注入 ProForm */\n\n\n  var FormComponent = editable ? ProForm : DefaultProDescriptionsDom;\n  /** 即使组件返回null了, 在传递的过程中还是会被Description检测到为有值 */\n\n  var title = null;\n\n  if (rest.title || rest.tooltip || rest.tip) {\n    title = /*#__PURE__*/React.createElement(LabelIconTip, {\n      label: rest.title,\n      tooltip: rest.tooltip || rest.tip\n    });\n  }\n\n  var className = context.getPrefixCls('pro-descriptions');\n  return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(FormComponent, _extends({\n    key: \"form\",\n    form: (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.form,\n    component: false,\n    submitter: false\n  }, formProps, {\n    onFinish: undefined\n  }), /*#__PURE__*/React.createElement(_Descriptions, _extends({\n    className: className\n  }, rest, {\n    extra: rest.extra ? /*#__PURE__*/React.createElement(_Space, null, options, rest.extra) : options,\n    title: title\n  }), children)));\n};\n\nProDescriptions.Item = ProDescriptionsItem;\nexport { ProDescriptions };\nexport default ProDescriptions;","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-descriptions/es/index.js"],"names":["_toConsumableArray","_regeneratorRuntime","_asyncToGenerator","_ConfigProvider","_Descriptions","_objectWithoutProperties","_Form","_Space","_extends","_objectSpread","_excluded","_excluded2","CheckOutlined","CloseOutlined","EditOutlined","ProForm","ProFormField","ProSkeleton","ErrorBoundary","genCopyable","getFieldPropsOrFormItemProps","InlineErrorFormItem","LabelIconTip","useEditableMap","toArray","get","React","useContext","useEffect","stringify","useFetchData","getDataFromConfig","item","entity","dataIndex","data","Array","isArray","undefined","children","FieldRender","props","valueEnum","action","index","text","mode","render","editableUtils","valueType","plain","request","renderFormItem","params","fieldConfig","proFieldProps","type","ignoreFormItem","fieldProps","rowKey","isEditable","createElement","name","style","marginTop","marginBottom","marginLeft","marginRight","Item","noStyle","shouldUpdate","pre","next","form","_editableUtils$action","formItemProps","dom","recordKey","record","getFieldValue","flat","defaultRender","margin","initialValue","actionRender","call","cancelText","saveText","deleteText","schemaToDescriptionsItem","items","_items$map","options","map","_getDataFromConfig","_restItem$label","isValidElement","renderText","editable","restItem","defaultData","title","fieldMode","showEditIcon","Component","Fragment","contentDom","field","key","label","toString","tooltip","tip","ellipsis","onClick","startEditable","push","filter","length","ProDescriptionsItem","DefaultProDescriptionsDom","ProDescriptions","_props$editable","columns","_props$params","dataSource","onDataSourceChange","formProps","loading","onLoadingChange","actionRef","onRequestError","rest","context","ConfigContext","mark","_callee","wrap","_callee$","_context","prev","t0","sent","abrupt","stop","effects","manual","childrenColumnName","setDataSource","current","reload","list","pageHeader","getColumns","childrenColumns","Boolean","_item$props","copyable","itemRequest","concat","includes","hideInDescriptions","sort","a","b","order","_schemaToDescriptions","FormComponent","className","getPrefixCls","component","submitter","onFinish","extra"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/descriptions/style\";\nimport _Descriptions from \"antd/es/descriptions\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"valueEnum\", \"render\", \"renderText\", \"mode\", \"plain\", \"dataIndex\", \"request\", \"params\", \"editable\"],\n    _excluded2 = [\"request\", \"columns\", \"params\", \"dataSource\", \"onDataSourceChange\", \"formProps\", \"editable\", \"loading\", \"onLoadingChange\", \"actionRef\", \"onRequestError\"];\nimport { CheckOutlined, CloseOutlined, EditOutlined } from '@ant-design/icons';\nimport ProForm, { ProFormField } from '@ant-design/pro-form';\nimport ProSkeleton from '@ant-design/pro-skeleton';\nimport { ErrorBoundary, genCopyable, getFieldPropsOrFormItemProps, InlineErrorFormItem, LabelIconTip, useEditableMap } from '@ant-design/pro-utils';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport get from \"rc-util/es/utils/get\";\nimport React, { useContext, useEffect } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport './index.less';\nimport useFetchData from './useFetchData';\n/**\n * 根据 dataIndex 获取值，支持 dataIndex 为数组\n *\n * @param item\n * @param entity\n */\n\nvar getDataFromConfig = function getDataFromConfig(item, entity) {\n  var dataIndex = item.dataIndex;\n\n  if (dataIndex) {\n    var data = Array.isArray(dataIndex) ? get(entity, dataIndex) : entity[dataIndex];\n\n    if (data !== undefined || data !== null) {\n      return data;\n    }\n  }\n\n  return item.children;\n};\n/**\n * 这里会处理编辑的功能\n *\n * @param props\n */\n\n\nexport var FieldRender = function FieldRender(props) {\n  var valueEnum = props.valueEnum,\n      action = props.action,\n      index = props.index,\n      text = props.text,\n      entity = props.entity,\n      mode = props.mode,\n      render = props.render,\n      editableUtils = props.editableUtils,\n      valueType = props.valueType,\n      plain = props.plain,\n      dataIndex = props.dataIndex,\n      request = props.request,\n      renderFormItem = props.renderFormItem,\n      params = props.params;\n  var fieldConfig = {\n    text: text,\n    valueEnum: valueEnum,\n    mode: mode || 'read',\n    proFieldProps: {\n      render: render ? function () {\n        return render === null || render === void 0 ? void 0 : render(text, entity, index, action, _objectSpread(_objectSpread({}, props), {}, {\n          type: 'descriptions'\n        }));\n      } : undefined\n    },\n    ignoreFormItem: true,\n    valueType: valueType,\n    request: request,\n    params: params,\n    plain: plain\n  };\n  /** 如果是只读模式，fieldProps 的 form是空的，所以需要兜底处理 */\n\n  if (mode === 'read' || !mode || valueType === 'option') {\n    var fieldProps = getFieldPropsOrFormItemProps(props.fieldProps, undefined, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: false\n    }));\n    return /*#__PURE__*/React.createElement(ProFormField, _extends({\n      name: dataIndex\n    }, fieldConfig, {\n      fieldProps: fieldProps\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: -5,\n      marginBottom: -5,\n      marginLeft: 0,\n      marginRight: 0\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(pre, next) {\n      return pre !== next;\n    }\n  }, function (form) {\n    var _editableUtils$action;\n\n    var formItemProps = getFieldPropsOrFormItemProps(props.formItemProps, form, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: true\n    }));\n    var fieldProps = getFieldPropsOrFormItemProps(props.fieldProps, form, _objectSpread(_objectSpread({}, props), {}, {\n      rowKey: dataIndex,\n      isEditable: true\n    }));\n    var dom = renderFormItem ? renderFormItem === null || renderFormItem === void 0 ? void 0 : renderFormItem(_objectSpread(_objectSpread({}, props), {}, {\n      type: 'descriptions'\n    }), {\n      isEditable: true,\n      recordKey: dataIndex,\n      record: form.getFieldValue([dataIndex].flat(1)),\n      defaultRender: function defaultRender() {\n        return /*#__PURE__*/React.createElement(ProFormField, _extends({}, fieldConfig, {\n          fieldProps: fieldProps\n        }));\n      },\n      type: 'descriptions'\n    }, form) : undefined;\n    return /*#__PURE__*/React.createElement(_Space, null, /*#__PURE__*/React.createElement(InlineErrorFormItem, _extends({\n      name: dataIndex\n    }, formItemProps, {\n      style: _objectSpread({\n        margin: 0\n      }, (formItemProps === null || formItemProps === void 0 ? void 0 : formItemProps.style) || {}),\n      initialValue: text || (formItemProps === null || formItemProps === void 0 ? void 0 : formItemProps.initialValue)\n    }), dom || /*#__PURE__*/React.createElement(ProFormField, _extends({}, fieldConfig, {\n      // @ts-ignore\n      proFieldProps: _objectSpread({}, fieldConfig.proFieldProps),\n      fieldProps: fieldProps\n    }))), editableUtils === null || editableUtils === void 0 ? void 0 : (_editableUtils$action = editableUtils.actionRender) === null || _editableUtils$action === void 0 ? void 0 : _editableUtils$action.call(editableUtils, dataIndex || index, form, {\n      cancelText: /*#__PURE__*/React.createElement(CloseOutlined, null),\n      saveText: /*#__PURE__*/React.createElement(CheckOutlined, null),\n      deleteText: false\n    }));\n  }));\n};\n\nvar schemaToDescriptionsItem = function schemaToDescriptionsItem(items, entity, action, editableUtils) {\n  var _items$map;\n\n  var options = []; // 因为 Descriptions 只是个语法糖，children 是不会执行的，所以需要这里处理一下\n\n  var children = items === null || items === void 0 ? void 0 : (_items$map = items.map) === null || _items$map === void 0 ? void 0 : _items$map.call(items, function (item, index) {\n    var _getDataFromConfig, _restItem$label;\n\n    if ( /*#__PURE__*/React.isValidElement(item)) {\n      return item;\n    }\n\n    var valueEnum = item.valueEnum,\n        render = item.render,\n        renderText = item.renderText,\n        mode = item.mode,\n        plain = item.plain,\n        dataIndex = item.dataIndex,\n        request = item.request,\n        params = item.params,\n        editable = item.editable,\n        restItem = _objectWithoutProperties(item, _excluded);\n\n    var defaultData = (_getDataFromConfig = getDataFromConfig(item, entity)) !== null && _getDataFromConfig !== void 0 ? _getDataFromConfig : restItem.children;\n    var text = renderText ? renderText(defaultData, entity, index, action) : defaultData;\n    var title = typeof restItem.title === 'function' ? restItem.title(item, 'descriptions', null) : restItem.title; //  dataIndex 无所谓是否存在\n    // 有些时候不需要 dataIndex 可以直接 render\n\n    var valueType = typeof restItem.valueType === 'function' ? restItem.valueType(entity || {}, 'descriptions') : restItem.valueType;\n    var isEditable = editableUtils === null || editableUtils === void 0 ? void 0 : editableUtils.isEditable(dataIndex || index);\n    var fieldMode = mode || isEditable ? 'edit' : 'read';\n    var showEditIcon = editableUtils && fieldMode === 'read' && editable !== false && (editable === null || editable === void 0 ? void 0 : editable(text, entity, index)) !== false;\n    var Component = showEditIcon ? _Space : React.Fragment;\n    var contentDom = fieldMode === 'edit' ? text : genCopyable(text, item, text);\n    var field = /*#__PURE__*/React.createElement(_Descriptions.Item, _extends({}, restItem, {\n      key: restItem.key || ((_restItem$label = restItem.label) === null || _restItem$label === void 0 ? void 0 : _restItem$label.toString()) || index,\n      label: (title || restItem.label || restItem.tooltip || restItem.tip) && /*#__PURE__*/React.createElement(LabelIconTip, {\n        label: title || restItem.label,\n        tooltip: restItem.tooltip || restItem.tip,\n        ellipsis: item.ellipsis\n      })\n    }), /*#__PURE__*/React.createElement(Component, null, /*#__PURE__*/React.createElement(FieldRender, _extends({}, item, {\n      dataIndex: item.dataIndex || index,\n      mode: fieldMode,\n      text: contentDom,\n      valueType: valueType,\n      entity: entity,\n      index: index,\n      action: action,\n      editableUtils: editableUtils\n    })), showEditIcon && valueType !== 'option' && /*#__PURE__*/React.createElement(EditOutlined, {\n      onClick: function onClick() {\n        editableUtils === null || editableUtils === void 0 ? void 0 : editableUtils.startEditable(dataIndex || index);\n      }\n    }))); // 如果类型是 option 自动放到右上角\n\n    if (valueType === 'option') {\n      options.push(field);\n      return null;\n    }\n\n    return field;\n  }).filter(function (item) {\n    return item;\n  });\n  return {\n    // 空数组传递还是会被判定为有值\n    options: (options === null || options === void 0 ? void 0 : options.length) ? options : null,\n    children: children\n  };\n};\n\nvar ProDescriptionsItem = function ProDescriptionsItem(props) {\n  return /*#__PURE__*/React.createElement(_Descriptions.Item, props, props.children);\n};\n\nvar DefaultProDescriptionsDom = function DefaultProDescriptionsDom(dom) {\n  return dom.children;\n};\n\nvar ProDescriptions = function ProDescriptions(props) {\n  var _props$editable;\n\n  var request = props.request,\n      columns = props.columns,\n      _props$params = props.params,\n      params = _props$params === void 0 ? {} : _props$params,\n      dataSource = props.dataSource,\n      onDataSourceChange = props.onDataSourceChange,\n      formProps = props.formProps,\n      editable = props.editable,\n      loading = props.loading,\n      onLoadingChange = props.onLoadingChange,\n      actionRef = props.actionRef,\n      onRequestError = props.onRequestError,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  var context = useContext(_ConfigProvider.ConfigContext);\n  var action = useFetchData( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!request) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return request(params);\n\n          case 3:\n            _context.t0 = _context.sent;\n            _context.next = 7;\n            break;\n\n          case 6:\n            _context.t0 = {\n              data: {}\n            };\n\n          case 7:\n            data = _context.t0;\n            return _context.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), {\n    onRequestError: onRequestError,\n    effects: [stringify(params)],\n    manual: !request,\n    dataSource: dataSource,\n    loading: loading,\n    onLoadingChange: onLoadingChange,\n    onDataSourceChange: onDataSourceChange\n  });\n  /*\n   * 可编辑行的相关配置\n   */\n\n  var editableUtils = useEditableMap(_objectSpread(_objectSpread({}, props.editable), {}, {\n    childrenColumnName: undefined,\n    dataSource: action.dataSource,\n    setDataSource: action.setDataSource\n  }));\n  /** 支持 reload 的功能 */\n\n  useEffect(function () {\n    if (actionRef) {\n      actionRef.current = _objectSpread({\n        reload: action.reload\n      }, editableUtils);\n    }\n  }, [action, actionRef, editableUtils]); // loading 时展示\n  // loading =  undefined 但是 request 存在时也应该展示\n\n  if (action.loading || action.loading === undefined && request) {\n    return /*#__PURE__*/React.createElement(ProSkeleton, {\n      type: \"descriptions\",\n      list: false,\n      pageHeader: false\n    });\n  }\n\n  var getColumns = function getColumns() {\n    // 因为 Descriptions 只是个语法糖，children 是不会执行的，所以需要这里处理一下\n    var childrenColumns = toArray(props.children).filter(Boolean).map(function (item) {\n      if (! /*#__PURE__*/React.isValidElement(item)) {\n        return item;\n      }\n\n      var _item$props = item === null || item === void 0 ? void 0 : item.props,\n          valueEnum = _item$props.valueEnum,\n          valueType = _item$props.valueType,\n          dataIndex = _item$props.dataIndex,\n          ellipsis = _item$props.ellipsis,\n          copyable = _item$props.copyable,\n          itemRequest = _item$props.request;\n\n      if (!valueType && !valueEnum && !dataIndex && !itemRequest && !ellipsis && !copyable) {\n        return item;\n      }\n\n      return _objectSpread(_objectSpread({}, item === null || item === void 0 ? void 0 : item.props), {}, {\n        entity: dataSource\n      });\n    });\n    return [].concat(_toConsumableArray(columns || []), _toConsumableArray(childrenColumns)).filter(function (item) {\n      if (!item) return false;\n\n      if ((item === null || item === void 0 ? void 0 : item.valueType) && ['index', 'indexBorder'].includes(item === null || item === void 0 ? void 0 : item.valueType)) {\n        return false;\n      }\n\n      return !(item === null || item === void 0 ? void 0 : item.hideInDescriptions);\n    }).sort(function (a, b) {\n      if (b.order || a.order) {\n        return (b.order || 0) - (a.order || 0);\n      }\n\n      return (b.index || 0) - (a.index || 0);\n    });\n  };\n\n  var _schemaToDescriptions = schemaToDescriptionsItem(getColumns(), action.dataSource || {}, (actionRef === null || actionRef === void 0 ? void 0 : actionRef.current) || action, editable ? editableUtils : undefined),\n      options = _schemaToDescriptions.options,\n      children = _schemaToDescriptions.children;\n  /** 如果不是可编辑模式，没必要注入 ProForm */\n\n\n  var FormComponent = editable ? ProForm : DefaultProDescriptionsDom;\n  /** 即使组件返回null了, 在传递的过程中还是会被Description检测到为有值 */\n\n  var title = null;\n\n  if (rest.title || rest.tooltip || rest.tip) {\n    title = /*#__PURE__*/React.createElement(LabelIconTip, {\n      label: rest.title,\n      tooltip: rest.tooltip || rest.tip\n    });\n  }\n\n  var className = context.getPrefixCls('pro-descriptions');\n  return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(FormComponent, _extends({\n    key: \"form\",\n    form: (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.form,\n    component: false,\n    submitter: false\n  }, formProps, {\n    onFinish: undefined\n  }), /*#__PURE__*/React.createElement(_Descriptions, _extends({\n    className: className\n  }, rest, {\n    extra: rest.extra ? /*#__PURE__*/React.createElement(_Space, null, options, rest.extra) : options,\n    title: title\n  }), children)));\n};\n\nProDescriptions.Item = ProDescriptionsItem;\nexport { ProDescriptions };\nexport default ProDescriptions;"]},"metadata":{},"sourceType":"module"}