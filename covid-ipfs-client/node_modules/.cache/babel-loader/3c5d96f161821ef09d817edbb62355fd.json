{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/* eslint-disable no-restricted-syntax */\n\n\nimport { useEffect, useMemo, useState } from 'react';\n/**\r\n *\r\n * @param {object} params\r\n * @returns {URL}\r\n */\n\nfunction setQueryToCurrentUrl(params) {\n  var _a;\n\n  var URL = (typeof window !== 'undefined' ? window : {}).URL;\n  var url = new URL((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href);\n  Object.keys(params).forEach(function (key) {\n    var value = params[key];\n\n    if (value !== null && value !== undefined) {\n      if (Array.isArray(value)) {\n        url.searchParams.delete(key);\n        value.forEach(function (valueItem) {\n          url.searchParams.append(key, valueItem);\n        });\n      } else if (value instanceof Date) {\n        if (!Number.isNaN(value.getTime())) {\n          url.searchParams.set(key, value.toISOString());\n        }\n      } else if (typeof value === 'object') {\n        url.searchParams.set(key, JSON.stringify(value));\n      } else {\n        url.searchParams.set(key, value);\n      }\n    } else {\n      url.searchParams.delete(key);\n    }\n  });\n  return url;\n}\n\nexport function useUrlSearchParams(initial, config) {\n  var _a;\n\n  if (initial === void 0) {\n    initial = {};\n  }\n\n  if (config === void 0) {\n    config = {\n      disabled: false\n    };\n  }\n  /**\r\n   * The main idea of this hook is to make things response to change of `window.location.search`,\r\n   * so no need for introducing new state (in the mean time).\r\n   * Whenever `window.location.search` is changed but  not cause re-render, call `forceUpdate()`.\r\n   * Whenever the component - user of this hook - re-render, this hook should return\r\n   * the query object that corresponse to the current `window.location.search`\r\n   */\n\n\n  var _b = useState(),\n      forceUpdate = _b[1];\n\n  var locationSearch = typeof window !== 'undefined' && ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.search);\n  /**\r\n   * @type {URLSearchParams}\r\n   */\n\n  var urlSearchParams = useMemo(function () {\n    if (config.disabled) return {};\n    return new URLSearchParams(locationSearch || {});\n  }, [config.disabled, locationSearch]);\n  var params = useMemo(function () {\n    if (config.disabled) return {};\n    if (typeof window === 'undefined' || !window.URL) return {};\n    var result = []; // @ts-ignore\n\n    urlSearchParams.forEach(function (value, key) {\n      result.push({\n        key: key,\n        value: value\n      });\n    }); // group by key\n\n    result = result.reduce(function (acc, val) {\n      (acc[val.key] = acc[val.key] || []).push(val);\n      return acc;\n    }, {});\n    result = Object.keys(result).map(function (key) {\n      var valueGroup = result[key];\n\n      if (valueGroup.length === 1) {\n        return [key, valueGroup[0].value];\n      }\n\n      return [key, valueGroup.map(function (_a) {\n        var value = _a.value;\n        return value;\n      })];\n    });\n\n    var newParams = __assign({}, initial);\n\n    result.forEach(function (_a) {\n      var key = _a[0],\n          value = _a[1];\n      newParams[key] = parseValue(key, value, {}, initial);\n    });\n    return newParams;\n  }, [config.disabled, initial, urlSearchParams]);\n\n  function redirectToNewSearchParams(newParams) {\n    if (typeof window === 'undefined' || !window.URL) return;\n    var url = setQueryToCurrentUrl(newParams);\n\n    if (window.location.search !== url.search) {\n      window.history.replaceState({}, '', url.toString());\n    }\n\n    if (urlSearchParams.toString() !== url.searchParams.toString()) {\n      forceUpdate({});\n    }\n  }\n\n  useEffect(function () {\n    if (config.disabled) return;\n    if (typeof window === 'undefined' || !window.URL) return;\n    redirectToNewSearchParams(__assign(__assign({}, initial), params));\n  }, [config.disabled, params]);\n\n  var setParams = function (newParams) {\n    redirectToNewSearchParams(newParams);\n  };\n\n  useEffect(function () {\n    if (config.disabled) return function () {};\n    if (typeof window === 'undefined' || !window.URL) return function () {};\n\n    var onPopState = function () {\n      forceUpdate({});\n    };\n\n    window.addEventListener('popstate', onPopState);\n    return function () {\n      window.removeEventListener('popstate', onPopState);\n    };\n  }, [config.disabled]);\n  return [params, setParams];\n}\nvar booleanValues = {\n  true: true,\n  false: false\n};\n\nfunction parseValue(key, _value, types, defaultParams) {\n  if (!types) return _value;\n  var type = types[key];\n  var value = _value === undefined ? defaultParams[key] : _value;\n\n  if (type === Number) {\n    return Number(value);\n  }\n\n  if (type === Boolean || _value === 'true' || _value === 'false') {\n    return booleanValues[value];\n  }\n\n  if (Array.isArray(type)) {\n    // eslint-disable-next-line eqeqeq\n    return type.find(function (item) {\n      return item == value;\n    }) || defaultParams[key];\n  }\n\n  return value;\n}","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@umijs/use-params/es/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useEffect","useMemo","useState","setQueryToCurrentUrl","params","_a","URL","window","url","location","href","keys","forEach","key","value","undefined","Array","isArray","searchParams","delete","valueItem","append","Date","Number","isNaN","getTime","set","toISOString","JSON","stringify","useUrlSearchParams","initial","config","disabled","_b","forceUpdate","locationSearch","search","urlSearchParams","URLSearchParams","result","push","reduce","acc","val","map","valueGroup","newParams","parseValue","redirectToNewSearchParams","history","replaceState","toString","setParams","onPopState","addEventListener","removeEventListener","booleanValues","true","false","_value","types","defaultParams","type","Boolean","find","item"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n/* eslint-disable no-restricted-syntax */\r\nimport { useEffect, useMemo, useState } from 'react';\r\n/**\r\n *\r\n * @param {object} params\r\n * @returns {URL}\r\n */\r\nfunction setQueryToCurrentUrl(params) {\r\n    var _a;\r\n    var URL = (typeof window !== 'undefined' ? window : {}).URL;\r\n    var url = new URL((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href);\r\n    Object.keys(params).forEach(function (key) {\r\n        var value = params[key];\r\n        if (value !== null && value !== undefined) {\r\n            if (Array.isArray(value)) {\r\n                url.searchParams.delete(key);\r\n                value.forEach(function (valueItem) {\r\n                    url.searchParams.append(key, valueItem);\r\n                });\r\n            }\r\n            else if (value instanceof Date) {\r\n                if (!Number.isNaN(value.getTime())) {\r\n                    url.searchParams.set(key, value.toISOString());\r\n                }\r\n            }\r\n            else if (typeof value === 'object') {\r\n                url.searchParams.set(key, JSON.stringify(value));\r\n            }\r\n            else {\r\n                url.searchParams.set(key, value);\r\n            }\r\n        }\r\n        else {\r\n            url.searchParams.delete(key);\r\n        }\r\n    });\r\n    return url;\r\n}\r\nexport function useUrlSearchParams(initial, config) {\r\n    var _a;\r\n    if (initial === void 0) { initial = {}; }\r\n    if (config === void 0) { config = { disabled: false }; }\r\n    /**\r\n     * The main idea of this hook is to make things response to change of `window.location.search`,\r\n     * so no need for introducing new state (in the mean time).\r\n     * Whenever `window.location.search` is changed but  not cause re-render, call `forceUpdate()`.\r\n     * Whenever the component - user of this hook - re-render, this hook should return\r\n     * the query object that corresponse to the current `window.location.search`\r\n     */\r\n    var _b = useState(), forceUpdate = _b[1];\r\n    var locationSearch = typeof window !== 'undefined' && ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.search);\r\n    /**\r\n     * @type {URLSearchParams}\r\n     */\r\n    var urlSearchParams = useMemo(function () {\r\n        if (config.disabled)\r\n            return {};\r\n        return new URLSearchParams(locationSearch || {});\r\n    }, [config.disabled, locationSearch]);\r\n    var params = useMemo(function () {\r\n        if (config.disabled)\r\n            return {};\r\n        if (typeof window === 'undefined' || !window.URL)\r\n            return {};\r\n        var result = [];\r\n        // @ts-ignore\r\n        urlSearchParams.forEach(function (value, key) {\r\n            result.push({\r\n                key: key,\r\n                value: value,\r\n            });\r\n        });\r\n        // group by key\r\n        result = result.reduce(function (acc, val) {\r\n            (acc[val.key] = acc[val.key] || []).push(val);\r\n            return acc;\r\n        }, {});\r\n        result = Object.keys(result).map(function (key) {\r\n            var valueGroup = result[key];\r\n            if (valueGroup.length === 1) {\r\n                return [key, valueGroup[0].value];\r\n            }\r\n            return [key, valueGroup.map(function (_a) {\r\n                    var value = _a.value;\r\n                    return value;\r\n                })];\r\n        });\r\n        var newParams = __assign({}, initial);\r\n        result.forEach(function (_a) {\r\n            var key = _a[0], value = _a[1];\r\n            newParams[key] = parseValue(key, value, {}, initial);\r\n        });\r\n        return newParams;\r\n    }, [config.disabled, initial, urlSearchParams]);\r\n    function redirectToNewSearchParams(newParams) {\r\n        if (typeof window === 'undefined' || !window.URL)\r\n            return;\r\n        var url = setQueryToCurrentUrl(newParams);\r\n        if (window.location.search !== url.search) {\r\n            window.history.replaceState({}, '', url.toString());\r\n        }\r\n        if (urlSearchParams.toString() !== url.searchParams.toString()) {\r\n            forceUpdate({});\r\n        }\r\n    }\r\n    useEffect(function () {\r\n        if (config.disabled)\r\n            return;\r\n        if (typeof window === 'undefined' || !window.URL)\r\n            return;\r\n        redirectToNewSearchParams(__assign(__assign({}, initial), params));\r\n    }, [config.disabled, params]);\r\n    var setParams = function (newParams) {\r\n        redirectToNewSearchParams(newParams);\r\n    };\r\n    useEffect(function () {\r\n        if (config.disabled)\r\n            return function () { };\r\n        if (typeof window === 'undefined' || !window.URL)\r\n            return function () { };\r\n        var onPopState = function () {\r\n            forceUpdate({});\r\n        };\r\n        window.addEventListener('popstate', onPopState);\r\n        return function () {\r\n            window.removeEventListener('popstate', onPopState);\r\n        };\r\n    }, [config.disabled]);\r\n    return [params, setParams];\r\n}\r\nvar booleanValues = {\r\n    true: true,\r\n    false: false,\r\n};\r\nfunction parseValue(key, _value, types, defaultParams) {\r\n    if (!types)\r\n        return _value;\r\n    var type = types[key];\r\n    var value = _value === undefined ? defaultParams[key] : _value;\r\n    if (type === Number) {\r\n        return Number(value);\r\n    }\r\n    if (type === Boolean || _value === 'true' || _value === 'false') {\r\n        return booleanValues[value];\r\n    }\r\n    if (Array.isArray(type)) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return type.find(function (item) { return item == value; }) || defaultParams[key];\r\n    }\r\n    return value;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}