{"ast":null,"code":"import \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"contentRender\", \"submitter\", \"fieldProps\", \"formItemProps\", \"groupProps\", \"dateFormatter\", \"formRef\", \"onInit\", \"form\", \"formComponentType\", \"extraUrlParams\", \"syncToUrl\", \"syncToInitialValues\", \"onReset\", \"omitNil\", \"isKeyPressSubmit\", \"autoFocusFirstInput\", \"grid\", \"rowProps\", \"colProps\"],\n    _excluded2 = [\"request\", \"params\", \"initialValues\", \"formKey\"];\nimport { ConfigProviderWrap } from '@ant-design/pro-provider';\nimport { conversionMomentValue, isDeepEqualReact, ProFormContext, runFunction, transformKeySubmitValue, useFetchData, useMountMergeState, usePrevious } from '@ant-design/pro-utils';\nimport { useUrlSearchParams } from '@umijs/use-params';\nimport get from \"rc-util/es/utils/get\";\nimport { default as namePathSet, default as set } from \"rc-util/es/utils/set\";\nimport { noteOnce } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { Submitter } from '../components';\nimport FieldContext from '../FieldContext';\nimport { GridContext, useGridHelpers } from '../helpers';\n\nvar genParams = function genParams(syncUrl, params, type) {\n  if (syncUrl === true) {\n    return params;\n  }\n\n  return runFunction(syncUrl, params, type);\n};\n/**\n * It takes a name path and converts it to an array.\n * @param {NamePath} name - The name of the form.\n * @returns string[]\n *\n * a-> [a]\n * [a] -> [a]\n */\n\n\nvar covertFormName = function covertFormName(name) {\n  if (!name) return name;\n  if (Array.isArray(name)) return name;\n  return [name];\n};\n\nfunction BaseFormComponents(props) {\n  var children = props.children,\n      contentRender = props.contentRender,\n      submitter = props.submitter,\n      fieldProps = props.fieldProps,\n      formItemProps = props.formItemProps,\n      groupProps = props.groupProps,\n      _props$dateFormatter = props.dateFormatter,\n      dateFormatter = _props$dateFormatter === void 0 ? 'string' : _props$dateFormatter,\n      propsFormRef = props.formRef,\n      onInit = props.onInit,\n      form = props.form,\n      formComponentType = props.formComponentType,\n      _props$extraUrlParams = props.extraUrlParams,\n      extraUrlParams = _props$extraUrlParams === void 0 ? {} : _props$extraUrlParams,\n      syncToUrl = props.syncToUrl,\n      _props$syncToInitialV = props.syncToInitialValues,\n      syncToInitialValues = _props$syncToInitialV === void 0 ? true : _props$syncToInitialV,\n      _onReset = props.onReset,\n      _props$omitNil = props.omitNil,\n      omitNil = _props$omitNil === void 0 ? true : _props$omitNil,\n      isKeyPressSubmit = props.isKeyPressSubmit,\n      _props$autoFocusFirst = props.autoFocusFirstInput,\n      autoFocusFirstInput = _props$autoFocusFirst === void 0 ? true : _props$autoFocusFirst,\n      grid = props.grid,\n      rowProps = props.rowProps,\n      colProps = props.colProps,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var sizeContextValue = useContext(_ConfigProvider.SizeContext);\n\n  var _Form$useForm = _Form.useForm(form),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      inlineForm = _Form$useForm2[0];\n  /** 同步 url 上的参数 */\n\n\n  var _useUrlSearchParams = useUrlSearchParams({}, {\n    disabled: !syncToUrl\n  }),\n      _useUrlSearchParams2 = _slicedToArray(_useUrlSearchParams, 2),\n      urlSearch = _useUrlSearchParams2[0],\n      setUrlSearch = _useUrlSearchParams2[1];\n\n  var formRef = useRef(inlineForm || {});\n\n  var _useGridHelpers = useGridHelpers({\n    grid: grid,\n    rowProps: rowProps\n  }),\n      RowWrapper = _useGridHelpers.RowWrapper;\n\n  var fieldsValueType = useRef({});\n  /** 保存 transformKeyRef，用于对表单key transform */\n\n  var transformKeyRef = useRef({});\n  /** 使用 callback 的类型 */\n\n  var transformKey = useCallback(function (values, omit, parentKey) {\n    return transformKeySubmitValue(conversionMomentValue(values, dateFormatter, fieldsValueType.current, omit, parentKey), transformKeyRef.current, omit);\n  }, [dateFormatter]);\n  var formatValues = useMemo(function () {\n    return {\n      /**\n       * 获取被 ProForm 格式化后的所有数据\n       * @param allData boolean\n       * @returns T\n       *\n       * @example  getFieldsFormatValue(true) ->返回所有数据，即使没有被 form 托管的\n       */\n      getFieldsFormatValue: function getFieldsFormatValue(allData) {\n        var _formRef$current;\n\n        return transformKey((_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.getFieldsValue(allData), omitNil);\n      },\n\n      /**\n       * 获取被 ProForm 格式化后的单个数据\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example {a:{b:value}} -> getFieldFormatValue(['a', 'b']) -> value\n       */\n\n      /** 获取格式化之后的单个数据 */\n      getFieldFormatValue: function getFieldFormatValue() {\n        var _formRef$current2;\n\n        var paramsNameList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var nameList = covertFormName(paramsNameList);\n        if (!nameList) throw new Error('nameList is require');\n        var value = (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.getFieldValue(nameList);\n        var obj = nameList ? set({}, nameList, value) : value;\n        return get(transformKey(obj, omitNil, nameList), nameList);\n      },\n\n      /**\n       * 获取被 ProForm 格式化后的单个数据, 包含他的 name\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example  {a:{b:value}} -> getFieldFormatValueObject(['a', 'b']) -> {a:{b:value}}\n       */\n\n      /** 获取格式化之后的单个数据 */\n      getFieldFormatValueObject: function getFieldFormatValueObject(paramsNameList) {\n        var _formRef$current3;\n\n        var nameList = covertFormName(paramsNameList);\n        var value = (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.getFieldValue(nameList);\n        var obj = nameList ? set({}, nameList, value) : value;\n        return transformKey(obj, omitNil, nameList);\n      },\n\n      /**\n      /**\n       *验字段后返回格式化之后的所有数据\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example validateFieldsReturnFormatValue -> {a:{b:value}}\n       */\n      validateFieldsReturnFormatValue: function () {\n        var _validateFieldsReturnFormatValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(nameList) {\n          var _formRef$current4;\n\n          var values, transformedKey;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(!Array.isArray(nameList) && nameList)) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  throw new Error('nameList must be array');\n\n                case 2:\n                  _context.next = 4;\n                  return (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 ? void 0 : _formRef$current4.validateFields(nameList);\n\n                case 4:\n                  values = _context.sent;\n                  transformedKey = transformKey(values, omitNil);\n                  return _context.abrupt(\"return\", transformedKey ? transformedKey : {});\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function validateFieldsReturnFormatValue(_x) {\n          return _validateFieldsReturnFormatValue.apply(this, arguments);\n        }\n\n        return validateFieldsReturnFormatValue;\n      }(),\n      formRef: formRef\n    };\n  }, [omitNil, transformKey]);\n  /** 利用反射把值传的到处都是，并且总是新的 */\n\n  var responseForm = useMemo(function () {\n    var response = _objectSpread({}, formRef.current);\n\n    Object.keys(formRef.current || {}).forEach(function (key) {\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return formRef.current[key];\n        }\n      });\n    });\n    Object.keys(formatValues).forEach(function (key) {\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return formatValues[key];\n        }\n      });\n    });\n    return response; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  var _useMountMergeState = useMountMergeState(false),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      loading = _useMountMergeState2[0],\n      setLoading = _useMountMergeState2[1];\n\n  var items = useMemo(function () {\n    return React.Children.toArray(children).map(function (item, index) {\n      if (index === 0 && /*#__PURE__*/React.isValidElement(item) && autoFocusFirstInput) {\n        return /*#__PURE__*/React.cloneElement(item, _objectSpread(_objectSpread({}, item.props), {}, {\n          autoFocus: autoFocusFirstInput\n        }));\n      }\n\n      return item;\n    });\n  }, [autoFocusFirstInput, children]);\n  /** 计算 props 的对象 */\n\n  var submitterProps = useMemo(function () {\n    return typeof submitter === 'boolean' || !submitter ? {} : submitter;\n  }, [submitter]); // 初始化给一个默认的 form\n\n  useImperativeHandle(propsFormRef, function () {\n    return responseForm;\n  });\n  /** 渲染提交按钮与重置按钮 */\n\n  var submitterNode = useMemo(function () {\n    if (submitter === false) return undefined;\n    return /*#__PURE__*/React.createElement(Submitter, _extends({\n      key: \"submitter\"\n    }, submitterProps, {\n      onReset: function onReset() {\n        var _formRef$current5, _submitterProps$onRes;\n\n        var finalValues = transformKey((_formRef$current5 = formRef.current) === null || _formRef$current5 === void 0 ? void 0 : _formRef$current5.getFieldsValue(), omitNil);\n        submitterProps === null || submitterProps === void 0 ? void 0 : (_submitterProps$onRes = submitterProps.onReset) === null || _submitterProps$onRes === void 0 ? void 0 : _submitterProps$onRes.call(submitterProps, finalValues);\n        _onReset === null || _onReset === void 0 ? void 0 : _onReset(finalValues); // 如果 syncToUrl，清空一下数据\n\n        if (syncToUrl) {\n          var _formRef$current6; // 把没有的值设置为未定义可以删掉 url 的参数\n\n\n          var params = Object.keys(transformKey((_formRef$current6 = formRef.current) === null || _formRef$current6 === void 0 ? void 0 : _formRef$current6.getFieldsValue(), false)).reduce(function (pre, next) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, next, finalValues[next] || undefined));\n          }, extraUrlParams);\n          /** 在同步到 url 上时对参数进行转化 */\n\n          setUrlSearch(genParams(syncToUrl, params, 'set'));\n        }\n      },\n      form: responseForm,\n      submitButtonProps: _objectSpread({\n        loading: loading\n      }, submitterProps.submitButtonProps)\n    }));\n  }, [submitter, submitterProps, responseForm, loading, transformKey, omitNil, _onReset, syncToUrl, extraUrlParams, setUrlSearch]);\n  var content = useMemo(function () {\n    var wrapItems = grid ? /*#__PURE__*/React.createElement(RowWrapper, null, items) : items;\n\n    if (contentRender) {\n      return contentRender(wrapItems, submitterNode, formRef.current);\n    }\n\n    return wrapItems;\n  }, [grid, RowWrapper, items, contentRender, submitterNode]);\n  var getPopupContainer = useMemo(function () {\n    if (typeof window === 'undefined') return undefined; // 如果在 drawerForm 和  modalForm 里就渲染dom到父节点里\n    // modalForm 可能高度太小不适合\n\n    if (formComponentType && ['DrawerForm'].includes(formComponentType)) {\n      return function (e) {\n        return e.parentNode || document.body;\n      };\n    }\n\n    return undefined;\n  }, [formComponentType]);\n  useEffect(function () {\n    var _formRef$current7;\n\n    var finalValues = transformKey((_formRef$current7 = formRef.current) === null || _formRef$current7 === void 0 ? void 0 : _formRef$current7.getFieldsValue(true), omitNil);\n    onInit === null || onInit === void 0 ? void 0 : onInit(finalValues, responseForm); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // 如果为 false，不需要触发设置进去\n\n  var _useState = useState(function () {\n    if (!syncToUrl) {\n      return {};\n    }\n\n    return genParams(syncToUrl, urlSearch, 'get');\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      urlParamsMergeInitialValues = _useState2[0],\n      setUrlParamsMergeInitialValues = _useState2[1];\n\n  useEffect(function () {\n    if (syncToInitialValues) return;\n    setUrlParamsMergeInitialValues({});\n  }, [syncToInitialValues]);\n  var preInitialValues = usePrevious(props.initialValues); // 提示一个 initialValues ，问的人实在是太多了\n\n  useEffect(function () {\n    if (syncToUrl || !props.initialValues || !preInitialValues || rest.request) return;\n    var isEqual = isDeepEqualReact(props.initialValues, preInitialValues);\n    noteOnce(isEqual, \"initialValues \\u53EA\\u5728 form \\u521D\\u59CB\\u5316\\u65F6\\u751F\\u6548\\uFF0C\\u5982\\u679C\\u4F60\\u9700\\u8981\\u5F02\\u6B65\\u52A0\\u8F7D\\u63A8\\u8350\\u4F7F\\u7528 request\\uFF0C\\u6216\\u8005 initialValues ? <Form/> : null \");\n    noteOnce(isEqual, \"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null \"); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.initialValues]);\n  useEffect(function () {\n    if (!syncToUrl) return;\n    setUrlSearch(_objectSpread(_objectSpread({}, urlSearch), extraUrlParams)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [extraUrlParams, syncToUrl]);\n  return (\n    /*#__PURE__*/\n    // 增加国际化的能力，与 table 组件可以统一\n    React.createElement(FieldContext.Provider, {\n      value: {\n        formRef: formRef,\n        fieldProps: fieldProps,\n        formItemProps: formItemProps,\n        groupProps: groupProps,\n        formComponentType: formComponentType,\n        getPopupContainer: getPopupContainer,\n        setFieldValueType: function setFieldValueType(name, _ref) {\n          var _ref$valueType = _ref.valueType,\n              valueType = _ref$valueType === void 0 ? 'text' : _ref$valueType,\n              dateFormat = _ref.dateFormat,\n              transform = _ref.transform;\n          if (!Array.isArray(name)) return;\n          transformKeyRef.current = namePathSet(transformKeyRef.current, name, transform);\n          fieldsValueType.current = namePathSet(fieldsValueType.current, name, {\n            valueType: valueType,\n            dateFormat: dateFormat\n          });\n        }\n      }\n    }, /*#__PURE__*/React.createElement(ProFormContext.Provider, {\n      value: formatValues\n    }, /*#__PURE__*/React.createElement(_ConfigProvider.SizeContext.Provider, {\n      value: rest.size || sizeContextValue\n    }, /*#__PURE__*/React.createElement(GridContext.Provider, {\n      value: {\n        grid: grid,\n        colProps: colProps\n      }\n    }, /*#__PURE__*/React.createElement(_Form, _extends({\n      onKeyPress: function onKeyPress(event) {\n        if (!isKeyPressSubmit) return;\n\n        if (event.key === 'Enter') {\n          var _formRef$current8;\n\n          (_formRef$current8 = formRef.current) === null || _formRef$current8 === void 0 ? void 0 : _formRef$current8.submit();\n        }\n      },\n      form: inlineForm\n    }, rest, {\n      // 组合 urlSearch 和 initialValues\n      initialValues: _objectSpread(_objectSpread({}, urlParamsMergeInitialValues), rest.initialValues),\n      onValuesChange: function onValuesChange(changedValues, values) {\n        var _rest$onValuesChange;\n\n        rest === null || rest === void 0 ? void 0 : (_rest$onValuesChange = rest.onValuesChange) === null || _rest$onValuesChange === void 0 ? void 0 : _rest$onValuesChange.call(rest, transformKey(changedValues, omitNil), transformKey(values, omitNil));\n      },\n      onFinish: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _formRef$current9, finalValues, _formRef$current10, params;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (rest.onFinish) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                if (!loading) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                setLoading(true);\n                _context2.prev = 5;\n                finalValues = transformKey((_formRef$current9 = formRef.current) === null || _formRef$current9 === void 0 ? void 0 : _formRef$current9.getFieldsValue(), omitNil);\n                _context2.next = 9;\n                return rest.onFinish(finalValues);\n\n              case 9:\n                if (syncToUrl) {\n                  // 把没有的值设置为未定义可以删掉 url 的参数\n                  params = Object.keys(transformKey((_formRef$current10 = formRef.current) === null || _formRef$current10 === void 0 ? void 0 : _formRef$current10.getFieldsValue(), false)).reduce(function (pre, next) {\n                    var _finalValues$next;\n\n                    return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, next, (_finalValues$next = finalValues[next]) !== null && _finalValues$next !== void 0 ? _finalValues$next : undefined));\n                  }, extraUrlParams); // fix #3547: 当原先在url中存在的字段被删除时，应该将 params 中的该字段设置为 undefined,以便触发url同步删除\n\n                  Object.keys(urlSearch).forEach(function (key) {\n                    if (params[key] !== false && params[key] !== 0 && !params[key]) {\n                      params[key] = undefined;\n                    }\n                  });\n                  /** 在同步到 url 上时对参数进行转化 */\n\n                  setUrlSearch(genParams(syncToUrl, params, 'set'));\n                }\n\n                setLoading(false);\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](5); // console.log(error);\n\n                setLoading(false);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[5, 13]]);\n      }))\n    }), rest.component !== false && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        display: 'none'\n      }\n    }), /*#__PURE__*/React.createElement(_Form.Item, {\n      noStyle: true,\n      shouldUpdate: true\n    }, function (formInstance) {\n      if (propsFormRef) propsFormRef.current = _objectSpread(_objectSpread({}, formInstance), formatValues);\n      formRef.current = formInstance;\n      return null;\n    }), content)))))\n  );\n}\n/** 自动的formKey 防止重复 */\n\n\nvar requestFormCacheId = 0;\n\nfunction BaseForm(props) {\n  var request = props.request,\n      params = props.params,\n      initialValues = props.initialValues,\n      _props$formKey = props.formKey,\n      formKey = _props$formKey === void 0 ? requestFormCacheId : _props$formKey,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  useEffect(function () {\n    requestFormCacheId += 0;\n  }, []);\n\n  var _useFetchData = useFetchData({\n    request: request,\n    params: params,\n    proFieldKey: formKey\n  }),\n      _useFetchData2 = _slicedToArray(_useFetchData, 1),\n      initialData = _useFetchData2[0];\n\n  if (!initialData && props.request) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: 50,\n        paddingBottom: 50,\n        textAlign: 'center'\n      }\n    }, /*#__PURE__*/React.createElement(_Spin, null));\n  }\n\n  return /*#__PURE__*/React.createElement(ConfigProviderWrap, null, /*#__PURE__*/React.createElement(BaseFormComponents, _extends({\n    autoComplete: \"off\"\n  }, rest, {\n    initialValues: _objectSpread(_objectSpread({}, initialValues), initialData)\n  })));\n}\n\nexport { BaseForm };","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-form/es/BaseForm/BaseForm.js"],"names":["_Spin","_extends","_defineProperty","_objectSpread","_regeneratorRuntime","_asyncToGenerator","_Form","_slicedToArray","_ConfigProvider","_objectWithoutProperties","_excluded","_excluded2","ConfigProviderWrap","conversionMomentValue","isDeepEqualReact","ProFormContext","runFunction","transformKeySubmitValue","useFetchData","useMountMergeState","usePrevious","useUrlSearchParams","get","default","namePathSet","set","noteOnce","React","useCallback","useContext","useEffect","useImperativeHandle","useMemo","useRef","useState","Submitter","FieldContext","GridContext","useGridHelpers","genParams","syncUrl","params","type","covertFormName","name","Array","isArray","BaseFormComponents","props","children","contentRender","submitter","fieldProps","formItemProps","groupProps","_props$dateFormatter","dateFormatter","propsFormRef","formRef","onInit","form","formComponentType","_props$extraUrlParams","extraUrlParams","syncToUrl","_props$syncToInitialV","syncToInitialValues","_onReset","onReset","_props$omitNil","omitNil","isKeyPressSubmit","_props$autoFocusFirst","autoFocusFirstInput","grid","rowProps","colProps","rest","sizeContextValue","SizeContext","_Form$useForm","useForm","_Form$useForm2","inlineForm","_useUrlSearchParams","disabled","_useUrlSearchParams2","urlSearch","setUrlSearch","_useGridHelpers","RowWrapper","fieldsValueType","transformKeyRef","transformKey","values","omit","parentKey","current","formatValues","getFieldsFormatValue","allData","_formRef$current","getFieldsValue","getFieldFormatValue","_formRef$current2","paramsNameList","arguments","length","undefined","nameList","Error","value","getFieldValue","obj","getFieldFormatValueObject","_formRef$current3","validateFieldsReturnFormatValue","_validateFieldsReturnFormatValue","mark","_callee","_formRef$current4","transformedKey","wrap","_callee$","_context","prev","next","validateFields","sent","abrupt","stop","_x","apply","responseForm","response","Object","keys","forEach","key","defineProperty","_useMountMergeState","_useMountMergeState2","loading","setLoading","items","Children","toArray","map","item","index","isValidElement","cloneElement","autoFocus","submitterProps","submitterNode","createElement","_formRef$current5","_submitterProps$onRes","finalValues","call","_formRef$current6","reduce","pre","submitButtonProps","content","wrapItems","getPopupContainer","window","includes","e","parentNode","document","body","_formRef$current7","_useState","_useState2","urlParamsMergeInitialValues","setUrlParamsMergeInitialValues","preInitialValues","initialValues","request","isEqual","Provider","setFieldValueType","_ref","_ref$valueType","valueType","dateFormat","transform","size","onKeyPress","event","_formRef$current8","submit","onValuesChange","changedValues","_rest$onValuesChange","onFinish","_callee2","_formRef$current9","_formRef$current10","_callee2$","_context2","_finalValues$next","t0","component","style","display","Item","noStyle","shouldUpdate","formInstance","requestFormCacheId","BaseForm","_props$formKey","formKey","_useFetchData","proFieldKey","_useFetchData2","initialData","paddingTop","paddingBottom","textAlign","autoComplete"],"mappings":"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","sourcesContent":["import \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"contentRender\", \"submitter\", \"fieldProps\", \"formItemProps\", \"groupProps\", \"dateFormatter\", \"formRef\", \"onInit\", \"form\", \"formComponentType\", \"extraUrlParams\", \"syncToUrl\", \"syncToInitialValues\", \"onReset\", \"omitNil\", \"isKeyPressSubmit\", \"autoFocusFirstInput\", \"grid\", \"rowProps\", \"colProps\"],\n    _excluded2 = [\"request\", \"params\", \"initialValues\", \"formKey\"];\nimport { ConfigProviderWrap } from '@ant-design/pro-provider';\nimport { conversionMomentValue, isDeepEqualReact, ProFormContext, runFunction, transformKeySubmitValue, useFetchData, useMountMergeState, usePrevious } from '@ant-design/pro-utils';\nimport { useUrlSearchParams } from '@umijs/use-params';\nimport get from \"rc-util/es/utils/get\";\nimport { default as namePathSet, default as set } from \"rc-util/es/utils/set\";\nimport { noteOnce } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { Submitter } from '../components';\nimport FieldContext from '../FieldContext';\nimport { GridContext, useGridHelpers } from '../helpers';\n\nvar genParams = function genParams(syncUrl, params, type) {\n  if (syncUrl === true) {\n    return params;\n  }\n\n  return runFunction(syncUrl, params, type);\n};\n/**\n * It takes a name path and converts it to an array.\n * @param {NamePath} name - The name of the form.\n * @returns string[]\n *\n * a-> [a]\n * [a] -> [a]\n */\n\n\nvar covertFormName = function covertFormName(name) {\n  if (!name) return name;\n  if (Array.isArray(name)) return name;\n  return [name];\n};\n\nfunction BaseFormComponents(props) {\n  var children = props.children,\n      contentRender = props.contentRender,\n      submitter = props.submitter,\n      fieldProps = props.fieldProps,\n      formItemProps = props.formItemProps,\n      groupProps = props.groupProps,\n      _props$dateFormatter = props.dateFormatter,\n      dateFormatter = _props$dateFormatter === void 0 ? 'string' : _props$dateFormatter,\n      propsFormRef = props.formRef,\n      onInit = props.onInit,\n      form = props.form,\n      formComponentType = props.formComponentType,\n      _props$extraUrlParams = props.extraUrlParams,\n      extraUrlParams = _props$extraUrlParams === void 0 ? {} : _props$extraUrlParams,\n      syncToUrl = props.syncToUrl,\n      _props$syncToInitialV = props.syncToInitialValues,\n      syncToInitialValues = _props$syncToInitialV === void 0 ? true : _props$syncToInitialV,\n      _onReset = props.onReset,\n      _props$omitNil = props.omitNil,\n      omitNil = _props$omitNil === void 0 ? true : _props$omitNil,\n      isKeyPressSubmit = props.isKeyPressSubmit,\n      _props$autoFocusFirst = props.autoFocusFirstInput,\n      autoFocusFirstInput = _props$autoFocusFirst === void 0 ? true : _props$autoFocusFirst,\n      grid = props.grid,\n      rowProps = props.rowProps,\n      colProps = props.colProps,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var sizeContextValue = useContext(_ConfigProvider.SizeContext);\n\n  var _Form$useForm = _Form.useForm(form),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      inlineForm = _Form$useForm2[0];\n  /** 同步 url 上的参数 */\n\n\n  var _useUrlSearchParams = useUrlSearchParams({}, {\n    disabled: !syncToUrl\n  }),\n      _useUrlSearchParams2 = _slicedToArray(_useUrlSearchParams, 2),\n      urlSearch = _useUrlSearchParams2[0],\n      setUrlSearch = _useUrlSearchParams2[1];\n\n  var formRef = useRef(inlineForm || {});\n\n  var _useGridHelpers = useGridHelpers({\n    grid: grid,\n    rowProps: rowProps\n  }),\n      RowWrapper = _useGridHelpers.RowWrapper;\n\n  var fieldsValueType = useRef({});\n  /** 保存 transformKeyRef，用于对表单key transform */\n\n  var transformKeyRef = useRef({});\n  /** 使用 callback 的类型 */\n\n  var transformKey = useCallback(function (values, omit, parentKey) {\n    return transformKeySubmitValue(conversionMomentValue(values, dateFormatter, fieldsValueType.current, omit, parentKey), transformKeyRef.current, omit);\n  }, [dateFormatter]);\n  var formatValues = useMemo(function () {\n    return {\n      /**\n       * 获取被 ProForm 格式化后的所有数据\n       * @param allData boolean\n       * @returns T\n       *\n       * @example  getFieldsFormatValue(true) ->返回所有数据，即使没有被 form 托管的\n       */\n      getFieldsFormatValue: function getFieldsFormatValue(allData) {\n        var _formRef$current;\n\n        return transformKey((_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.getFieldsValue(allData), omitNil);\n      },\n\n      /**\n       * 获取被 ProForm 格式化后的单个数据\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example {a:{b:value}} -> getFieldFormatValue(['a', 'b']) -> value\n       */\n\n      /** 获取格式化之后的单个数据 */\n      getFieldFormatValue: function getFieldFormatValue() {\n        var _formRef$current2;\n\n        var paramsNameList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var nameList = covertFormName(paramsNameList);\n        if (!nameList) throw new Error('nameList is require');\n        var value = (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.getFieldValue(nameList);\n        var obj = nameList ? set({}, nameList, value) : value;\n        return get(transformKey(obj, omitNil, nameList), nameList);\n      },\n\n      /**\n       * 获取被 ProForm 格式化后的单个数据, 包含他的 name\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example  {a:{b:value}} -> getFieldFormatValueObject(['a', 'b']) -> {a:{b:value}}\n       */\n\n      /** 获取格式化之后的单个数据 */\n      getFieldFormatValueObject: function getFieldFormatValueObject(paramsNameList) {\n        var _formRef$current3;\n\n        var nameList = covertFormName(paramsNameList);\n        var value = (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.getFieldValue(nameList);\n        var obj = nameList ? set({}, nameList, value) : value;\n        return transformKey(obj, omitNil, nameList);\n      },\n\n      /**\n      /**\n       *验字段后返回格式化之后的所有数据\n       * @param nameList (string|number)[]\n       * @returns T\n       *\n       * @example validateFieldsReturnFormatValue -> {a:{b:value}}\n       */\n      validateFieldsReturnFormatValue: function () {\n        var _validateFieldsReturnFormatValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(nameList) {\n          var _formRef$current4;\n\n          var values, transformedKey;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(!Array.isArray(nameList) && nameList)) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  throw new Error('nameList must be array');\n\n                case 2:\n                  _context.next = 4;\n                  return (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 ? void 0 : _formRef$current4.validateFields(nameList);\n\n                case 4:\n                  values = _context.sent;\n                  transformedKey = transformKey(values, omitNil);\n                  return _context.abrupt(\"return\", transformedKey ? transformedKey : {});\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function validateFieldsReturnFormatValue(_x) {\n          return _validateFieldsReturnFormatValue.apply(this, arguments);\n        }\n\n        return validateFieldsReturnFormatValue;\n      }(),\n      formRef: formRef\n    };\n  }, [omitNil, transformKey]);\n  /** 利用反射把值传的到处都是，并且总是新的 */\n\n  var responseForm = useMemo(function () {\n    var response = _objectSpread({}, formRef.current);\n\n    Object.keys(formRef.current || {}).forEach(function (key) {\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return formRef.current[key];\n        }\n      });\n    });\n    Object.keys(formatValues).forEach(function (key) {\n      Object.defineProperty(response, key, {\n        get: function get() {\n          return formatValues[key];\n        }\n      });\n    });\n    return response; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  var _useMountMergeState = useMountMergeState(false),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      loading = _useMountMergeState2[0],\n      setLoading = _useMountMergeState2[1];\n\n  var items = useMemo(function () {\n    return React.Children.toArray(children).map(function (item, index) {\n      if (index === 0 && /*#__PURE__*/React.isValidElement(item) && autoFocusFirstInput) {\n        return /*#__PURE__*/React.cloneElement(item, _objectSpread(_objectSpread({}, item.props), {}, {\n          autoFocus: autoFocusFirstInput\n        }));\n      }\n\n      return item;\n    });\n  }, [autoFocusFirstInput, children]);\n  /** 计算 props 的对象 */\n\n  var submitterProps = useMemo(function () {\n    return typeof submitter === 'boolean' || !submitter ? {} : submitter;\n  }, [submitter]); // 初始化给一个默认的 form\n\n  useImperativeHandle(propsFormRef, function () {\n    return responseForm;\n  });\n  /** 渲染提交按钮与重置按钮 */\n\n  var submitterNode = useMemo(function () {\n    if (submitter === false) return undefined;\n    return /*#__PURE__*/React.createElement(Submitter, _extends({\n      key: \"submitter\"\n    }, submitterProps, {\n      onReset: function onReset() {\n        var _formRef$current5, _submitterProps$onRes;\n\n        var finalValues = transformKey((_formRef$current5 = formRef.current) === null || _formRef$current5 === void 0 ? void 0 : _formRef$current5.getFieldsValue(), omitNil);\n        submitterProps === null || submitterProps === void 0 ? void 0 : (_submitterProps$onRes = submitterProps.onReset) === null || _submitterProps$onRes === void 0 ? void 0 : _submitterProps$onRes.call(submitterProps, finalValues);\n        _onReset === null || _onReset === void 0 ? void 0 : _onReset(finalValues); // 如果 syncToUrl，清空一下数据\n\n        if (syncToUrl) {\n          var _formRef$current6;\n\n          // 把没有的值设置为未定义可以删掉 url 的参数\n          var params = Object.keys(transformKey((_formRef$current6 = formRef.current) === null || _formRef$current6 === void 0 ? void 0 : _formRef$current6.getFieldsValue(), false)).reduce(function (pre, next) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, next, finalValues[next] || undefined));\n          }, extraUrlParams);\n          /** 在同步到 url 上时对参数进行转化 */\n\n          setUrlSearch(genParams(syncToUrl, params, 'set'));\n        }\n      },\n      form: responseForm,\n      submitButtonProps: _objectSpread({\n        loading: loading\n      }, submitterProps.submitButtonProps)\n    }));\n  }, [submitter, submitterProps, responseForm, loading, transformKey, omitNil, _onReset, syncToUrl, extraUrlParams, setUrlSearch]);\n  var content = useMemo(function () {\n    var wrapItems = grid ? /*#__PURE__*/React.createElement(RowWrapper, null, items) : items;\n\n    if (contentRender) {\n      return contentRender(wrapItems, submitterNode, formRef.current);\n    }\n\n    return wrapItems;\n  }, [grid, RowWrapper, items, contentRender, submitterNode]);\n  var getPopupContainer = useMemo(function () {\n    if (typeof window === 'undefined') return undefined; // 如果在 drawerForm 和  modalForm 里就渲染dom到父节点里\n    // modalForm 可能高度太小不适合\n\n    if (formComponentType && ['DrawerForm'].includes(formComponentType)) {\n      return function (e) {\n        return e.parentNode || document.body;\n      };\n    }\n\n    return undefined;\n  }, [formComponentType]);\n  useEffect(function () {\n    var _formRef$current7;\n\n    var finalValues = transformKey((_formRef$current7 = formRef.current) === null || _formRef$current7 === void 0 ? void 0 : _formRef$current7.getFieldsValue(true), omitNil);\n    onInit === null || onInit === void 0 ? void 0 : onInit(finalValues, responseForm); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // 如果为 false，不需要触发设置进去\n\n  var _useState = useState(function () {\n    if (!syncToUrl) {\n      return {};\n    }\n\n    return genParams(syncToUrl, urlSearch, 'get');\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      urlParamsMergeInitialValues = _useState2[0],\n      setUrlParamsMergeInitialValues = _useState2[1];\n\n  useEffect(function () {\n    if (syncToInitialValues) return;\n    setUrlParamsMergeInitialValues({});\n  }, [syncToInitialValues]);\n  var preInitialValues = usePrevious(props.initialValues); // 提示一个 initialValues ，问的人实在是太多了\n\n  useEffect(function () {\n    if (syncToUrl || !props.initialValues || !preInitialValues || rest.request) return;\n    var isEqual = isDeepEqualReact(props.initialValues, preInitialValues);\n    noteOnce(isEqual, \"initialValues \\u53EA\\u5728 form \\u521D\\u59CB\\u5316\\u65F6\\u751F\\u6548\\uFF0C\\u5982\\u679C\\u4F60\\u9700\\u8981\\u5F02\\u6B65\\u52A0\\u8F7D\\u63A8\\u8350\\u4F7F\\u7528 request\\uFF0C\\u6216\\u8005 initialValues ? <Form/> : null \");\n    noteOnce(isEqual, \"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null \"); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.initialValues]);\n  useEffect(function () {\n    if (!syncToUrl) return;\n    setUrlSearch(_objectSpread(_objectSpread({}, urlSearch), extraUrlParams)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [extraUrlParams, syncToUrl]);\n  return (\n    /*#__PURE__*/\n    // 增加国际化的能力，与 table 组件可以统一\n    React.createElement(FieldContext.Provider, {\n      value: {\n        formRef: formRef,\n        fieldProps: fieldProps,\n        formItemProps: formItemProps,\n        groupProps: groupProps,\n        formComponentType: formComponentType,\n        getPopupContainer: getPopupContainer,\n        setFieldValueType: function setFieldValueType(name, _ref) {\n          var _ref$valueType = _ref.valueType,\n              valueType = _ref$valueType === void 0 ? 'text' : _ref$valueType,\n              dateFormat = _ref.dateFormat,\n              transform = _ref.transform;\n          if (!Array.isArray(name)) return;\n          transformKeyRef.current = namePathSet(transformKeyRef.current, name, transform);\n          fieldsValueType.current = namePathSet(fieldsValueType.current, name, {\n            valueType: valueType,\n            dateFormat: dateFormat\n          });\n        }\n      }\n    }, /*#__PURE__*/React.createElement(ProFormContext.Provider, {\n      value: formatValues\n    }, /*#__PURE__*/React.createElement(_ConfigProvider.SizeContext.Provider, {\n      value: rest.size || sizeContextValue\n    }, /*#__PURE__*/React.createElement(GridContext.Provider, {\n      value: {\n        grid: grid,\n        colProps: colProps\n      }\n    }, /*#__PURE__*/React.createElement(_Form, _extends({\n      onKeyPress: function onKeyPress(event) {\n        if (!isKeyPressSubmit) return;\n\n        if (event.key === 'Enter') {\n          var _formRef$current8;\n\n          (_formRef$current8 = formRef.current) === null || _formRef$current8 === void 0 ? void 0 : _formRef$current8.submit();\n        }\n      },\n      form: inlineForm\n    }, rest, {\n      // 组合 urlSearch 和 initialValues\n      initialValues: _objectSpread(_objectSpread({}, urlParamsMergeInitialValues), rest.initialValues),\n      onValuesChange: function onValuesChange(changedValues, values) {\n        var _rest$onValuesChange;\n\n        rest === null || rest === void 0 ? void 0 : (_rest$onValuesChange = rest.onValuesChange) === null || _rest$onValuesChange === void 0 ? void 0 : _rest$onValuesChange.call(rest, transformKey(changedValues, omitNil), transformKey(values, omitNil));\n      },\n      onFinish: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _formRef$current9, finalValues, _formRef$current10, params;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (rest.onFinish) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                if (!loading) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                setLoading(true);\n                _context2.prev = 5;\n                finalValues = transformKey((_formRef$current9 = formRef.current) === null || _formRef$current9 === void 0 ? void 0 : _formRef$current9.getFieldsValue(), omitNil);\n                _context2.next = 9;\n                return rest.onFinish(finalValues);\n\n              case 9:\n                if (syncToUrl) {\n                  // 把没有的值设置为未定义可以删掉 url 的参数\n                  params = Object.keys(transformKey((_formRef$current10 = formRef.current) === null || _formRef$current10 === void 0 ? void 0 : _formRef$current10.getFieldsValue(), false)).reduce(function (pre, next) {\n                    var _finalValues$next;\n\n                    return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, next, (_finalValues$next = finalValues[next]) !== null && _finalValues$next !== void 0 ? _finalValues$next : undefined));\n                  }, extraUrlParams); // fix #3547: 当原先在url中存在的字段被删除时，应该将 params 中的该字段设置为 undefined,以便触发url同步删除\n\n                  Object.keys(urlSearch).forEach(function (key) {\n                    if (params[key] !== false && params[key] !== 0 && !params[key]) {\n                      params[key] = undefined;\n                    }\n                  });\n                  /** 在同步到 url 上时对参数进行转化 */\n\n                  setUrlSearch(genParams(syncToUrl, params, 'set'));\n                }\n\n                setLoading(false);\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](5);\n                // console.log(error);\n                setLoading(false);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[5, 13]]);\n      }))\n    }), rest.component !== false && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        display: 'none'\n      }\n    }), /*#__PURE__*/React.createElement(_Form.Item, {\n      noStyle: true,\n      shouldUpdate: true\n    }, function (formInstance) {\n      if (propsFormRef) propsFormRef.current = _objectSpread(_objectSpread({}, formInstance), formatValues);\n      formRef.current = formInstance;\n      return null;\n    }), content)))))\n  );\n}\n/** 自动的formKey 防止重复 */\n\n\nvar requestFormCacheId = 0;\n\nfunction BaseForm(props) {\n  var request = props.request,\n      params = props.params,\n      initialValues = props.initialValues,\n      _props$formKey = props.formKey,\n      formKey = _props$formKey === void 0 ? requestFormCacheId : _props$formKey,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  useEffect(function () {\n    requestFormCacheId += 0;\n  }, []);\n\n  var _useFetchData = useFetchData({\n    request: request,\n    params: params,\n    proFieldKey: formKey\n  }),\n      _useFetchData2 = _slicedToArray(_useFetchData, 1),\n      initialData = _useFetchData2[0];\n\n  if (!initialData && props.request) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: 50,\n        paddingBottom: 50,\n        textAlign: 'center'\n      }\n    }, /*#__PURE__*/React.createElement(_Spin, null));\n  }\n\n  return /*#__PURE__*/React.createElement(ConfigProviderWrap, null, /*#__PURE__*/React.createElement(BaseFormComponents, _extends({\n    autoComplete: \"off\"\n  }, rest, {\n    initialValues: _objectSpread(_objectSpread({}, initialValues), initialData)\n  })));\n}\n\nexport { BaseForm };"]},"metadata":{},"sourceType":"module"}